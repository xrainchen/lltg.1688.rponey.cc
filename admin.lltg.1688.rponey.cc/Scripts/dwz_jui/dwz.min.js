///<jscompress sourcefile="dwz.core.js" />
/**
 * @author 张慧华 z@j-ui.com
 * 
 *////<jscompress sourcefile="dwz.barDrag.js" />
/**
 * @author Roger Wu 
 * @version 1.0
 *////<jscompress sourcefile="dwz.accordion.js" />
/**
 * @author Roger Wu
 *////<jscompress sourcefile="dwz.ajax.js" />
/**
 * @author 张慧华 z@j-ui.com
 * 
 */

/**
 * 普通ajax表单提交
 * @param {Object} form
 * @param {Object} callback
 * @param {String} confirmMsg 提示确认信息
 *////<jscompress sourcefile="dwz.alertMsg.js" />
/**
 * @author 张慧华 z@j-ui.com
 *////<jscompress sourcefile="dwz.checkbox.js" />
/**
 * @author 张慧华 z@j-ui.com
 *////<jscompress sourcefile="dwz.combox.js" />
/**
 * @author Roger Wu
 *////<jscompress sourcefile="dwz.contextmenu.js" />
/**
 * @author 张慧华 z@j-ui.com
 *////<jscompress sourcefile="dwz.cssTable.js" />
/**
 * Theme Plugins
 * @author 张慧华 z@j-ui.com
 *////<jscompress sourcefile="dwz.database.js" />
/**
 * @author ZhangHuihua@msn.com
 *////<jscompress sourcefile="dwz.datepicker.js" />
/**
 * reference dwz.util.date.js
 * @author ZhangHuihua@msn.com
 * 
 *////<jscompress sourcefile="dwz.dialog.js" />
/**
 * @author Roger Wu
 * reference:dwz.drag.js, dwz.dialogDrag.js, dwz.resize.js, dwz.taskBar.js
 *////<jscompress sourcefile="dwz.dialogDrag.js" />
/**
 * @author Roger Wu
 *////<jscompress sourcefile="dwz.drag.js" />
/**
 * @author Roger Wu
 *////<jscompress sourcefile="dwz.effects.js" />
/**
 * @author Roger Wu
 *////<jscompress sourcefile="dwz.history.js" />
/**
 * jQuery ajax history plugins
 * @author 张慧华 z@j-ui.com
 *////<jscompress sourcefile="dwz.navTab.js" />
/**
 * @author 张慧华 z@j-ui.com
 * 
 *////<jscompress sourcefile="dwz.pagination.js" />
/**
 * 
 * @author 张慧华 z@j-ui.com
 * @param {Object} opts Several options
 *////<jscompress sourcefile="dwz.panel.js" />
/**
 * @author Roger Wu
 * @version 1.0
 *////<jscompress sourcefile="dwz.print.js" />
/**
 * @author 张慧华 z@j-ui.com
 * 
 *////<jscompress sourcefile="dwz.regional.zh.js" />
/**
 * @author 张慧华 z@j-ui.com
 *////<jscompress sourcefile="dwz.resize.js" />
/**
 * @author Roger Wu
 * @version 1.0
 *////<jscompress sourcefile="dwz.scrollCenter.js" />
/**
 * @desc 兼容不同的浏览器居中scrollCenter
 * @author 张慧华 z@j-ui.com
 *////<jscompress sourcefile="dwz.sortDrag.js" />
/**
 * @author 张慧华 z@j-ui.com
 *////<jscompress sourcefile="dwz.stable.js" />
/**
 * @author Roger Wu v1.0
 * @author ZhangHuihua@msn.com 2011-4-1
 *////<jscompress sourcefile="dwz.switchEnv.js" />
/**
 * @author zhanghuihua@msn.com
 *////<jscompress sourcefile="dwz.tab.js" />
/**
 * @author 张慧华 z@j-ui.com
 * 
 *////<jscompress sourcefile="dwz.taskBar.js" />
/**
 * @author Roger Wu
 * @version 1.0
 *////<jscompress sourcefile="dwz.theme.js" />
/**
 * Theme Plugins
 * @author 张慧华 z@j-ui.com
 *////<jscompress sourcefile="dwz.tree.js" />
/**
 * @author Roger Wu
 * @version 1.0
 * added extend property oncheck
 *////<jscompress sourcefile="dwz.util.date.js" />
/**
 * @author 张慧华 z@j-ui.com
 * ----------------------------------------------------------
 * These functions use the same 'format' strings as the 
 * java.text.SimpleDateFormat class, with minor exceptions.
 * The format string consists of the following abbreviations:
 * 
 * Field        | Full Form          | Short Form
 * -------------+--------------------+-----------------------
 * Year         | yyyy (4 digits)    | yy (2 digits), y (2 or 4 digits)
 * Month        | MMM (name or abbr.)| MM (2 digits), M (1 or 2 digits)
 *              | NNN (abbr.)        |
 * Day of Month | dd (2 digits)      | d (1 or 2 digits)
 * Day of Week  | EE (name)          | E (abbr)
 * Hour (1-12)  | hh (2 digits)      | h (1 or 2 digits)
 * Hour (0-23)  | HH (2 digits)      | H (1 or 2 digits)
 * Hour (0-11)  | KK (2 digits)      | K (1 or 2 digits)
 * Hour (1-24)  | kk (2 digits)      | k (1 or 2 digits)
 * Minute       | mm (2 digits)      | m (1 or 2 digits)
 * Second       | ss (2 digits)      | s (1 or 2 digits)
 * AM/PM        | a                  |
 *
 * NOTE THE DIFFERENCE BETWEEN MM and mm! Month=MM, not mm!
 * Examples:
 *  "MMM d, y" matches: January 01, 2000
 *                      Dec 1, 1900
 *                      Nov 20, 00
 *  "M/d/yy"   matches: 01/20/00
 *                      9/2/00
 *  "MMM dd, yyyy hh:mm:ssa" matches: "January 01, 2000 12:30:45AM"
 * ----------------------------------------------------------
 *////<jscompress sourcefile="dwz.util.number.js" />
/**
 * @author 张慧华 z@j-ui.com
 * 
 *////<jscompress sourcefile="dwz.validate.method.js" />
/**
 * @requires jquery.validate.js
 * @author 张慧华 z@j-ui.com
 */var DWZ={version:"1.5.2",regPlugins:[],keyCode:{ENTER:13,ESC:27,END:35,HOME:36,SHIFT:16,TAB:9,LEFT:37,RIGHT:39,UP:38,DOWN:40,DELETE:46,BACKSPACE:8},eventType:{pageClear:"pageClear",resizeGrid:"resizeGrid"},isOverAxis:function(a,c,b){return a>c&&a<c+b},isOver:function(a,c,b,d,e,g){return this.isOverAxis(a,b,e)&&this.isOverAxis(c,d,g)},pageInfo:{pageNum:"pageNum",numPerPage:"numPerPage",orderField:"orderField",orderDirection:"orderDirection"},statusCode:{ok:200,warn:201,error:300,timeout:301},keys:{statusCode:"statusCode",message:"message"},ui:{sbar:!0,hideMode:"display"},frag:{},_msg:{},_set:{loginUrl:"",loginTitle:"",debug:!1},msg:function(a,c){var b;b=c||[];for(var d=this._msg[a]||"",e=0;e<b.length;e++)d=d.replace(new RegExp("\\{"+e+"\\}","g"),b[e]);return d},debug:function(a){this._set.debug&&("undefined"!=typeof console?console.log(a):alert(a))},loadLogin:function(){$.pdialog&&DWZ._set.loginTitle?$.pdialog.open(DWZ._set.loginUrl,"login",DWZ._set.loginTitle,{mask:!0,width:520,height:260}):window.location=DWZ._set.loginUrl},obj2str:function(a){var c=[];if("string"==typeof a)return'"'+a.replace(/([\'\"\\])/g,"\\$1").replace(/(\n)/g,"\\n").replace(/(\r)/g,"\\r").replace(/(\t)/g,"\\t")+'"';if("object"==typeof a){if(a.sort){for(b=0;b<a.length;b++)c.push(DWZ.obj2str(a[b]));c="["+c.join()+"]"}else{for(var b in a)c.push(b+":"+DWZ.obj2str(a[b]));document.all&&!/^\n?function\s*toString\(\)\s*\{\n?\s*\[native code\]\n?\s*\}\n?\s*$/.test(a.toString)&&c.push("toString:"+a.toString.toString());c="{"+c.join()+"}"}return c}return a.toString()},jsonEval:function(a){try{return"string"==$.type(a)?eval("("+a+")"):a}catch(c){return{}}},ajaxError:function(a,c,b){alertMsg?alertMsg.error("\x3cdiv\x3eHttp status: "+a.status+" "+a.statusText+"\x3c/div\x3e\x3cdiv\x3eajaxOptions: "+c+"\x3c/div\x3e\x3cdiv\x3ethrownError: "+b+"\x3c/div\x3e\x3cdiv\x3e"+a.responseText+"\x3c/div\x3e"):alert("Http status: "+a.status+" "+a.statusText+"\najaxOptions: "+c+"\nthrownError:"+b+"\n"+a.responseText)},ajaxDone:function(a){a[DWZ.keys.statusCode]==DWZ.statusCode.error?a[DWZ.keys.message]&&alertMsg&&alertMsg.error(a[DWZ.keys.message]):a[DWZ.keys.statusCode]==DWZ.statusCode.timeout?alertMsg?alertMsg.error(a[DWZ.keys.message]||DWZ.msg("sessionTimout"),{okCall:DWZ.loadLogin}):DWZ.loadLogin():a[DWZ.keys.statusCode]==DWZ.statusCode.warn?a[DWZ.keys.message]&&alertMsg&&alertMsg.warn(a[DWZ.keys.message]):a[DWZ.keys.statusCode]==DWZ.statusCode.ok&&a[DWZ.keys.message]&&alertMsg&&alertMsg.correct(a[DWZ.keys.message])},init:function(a,c){var b=$.extend({loginUrl:"login.html",loginTitle:null,callback:null,debug:!1,statusCode:{},keys:{}},c);this._set.loginUrl=b.loginUrl;this._set.loginTitle=b.loginTitle;this._set.debug=b.debug;$.extend(DWZ.statusCode,b.statusCode);$.extend(DWZ.keys,b.keys);$.extend(DWZ.pageInfo,b.pageInfo);$.extend(DWZ.ui,b.ui);jQuery.ajax({type:"GET",url:a,dataType:"xml",timeout:5E4,cache:!1,error:function(b){alert("Error loading XML document: "+a+"\nHttp status: "+b.status+" "+b.statusText)},success:function(a){$(a).find("_PAGE_").each(function(){var a=$(this).attr("id");a&&(DWZ.frag[a]=$(this).text())});$(a).find("_MSG_").each(function(){var a=$(this).attr("id");a&&(DWZ._msg[a]=$(this).text())});jQuery.isFunction(b.callback)&&b.callback()}});var d=$(document);d.isBind(DWZ.eventType.pageClear)||d.bind(DWZ.eventType.pageClear,function(a){a=a.target;$.fn.xheditor&&$("textarea.editor",a).xheditor(!1)})}};(function(a){a.setRegional=function(c,b){a.regional||(a.regional={});a.regional[c]=b};a.fn.extend({ajaxUrl:function(c){var b=a(this);b.trigger(DWZ.eventType.pageClear);a.ajax({type:c.type||"GET",url:c.url,data:c.data,cache:!1,success:function(d){var e=DWZ.jsonEval(d);e[DWZ.keys.statusCode]==DWZ.statusCode.error?e[DWZ.keys.message]&&alertMsg.error(e[DWZ.keys.message]):(b.html(d).initUI(),a.isFunction(c.callback)&&c.callback(d));e[DWZ.keys.statusCode]==DWZ.statusCode.timeout&&(a.pdialog&&a.pdialog.checkTimeout(),navTab&&navTab.checkTimeout(),alertMsg.error(e[DWZ.keys.message]||DWZ.msg("sessionTimout"),{okCall:function(){DWZ.loadLogin()}}))},error:DWZ.ajaxError,statusCode:{503:function(a,b,c){alert(DWZ.msg("statusCode_503")||c)}}})},loadUrl:function(c,b,d){a(this).ajaxUrl({url:c,data:b,callback:d})},initUI:function(){return this.each(function(){var c=a(this);a.each(DWZ.regPlugins,function(a,d){d(c)})})},layoutH:function(c){return this.each(function(){var b=a(this);c||(c=b.parents("div.layoutBox:first"));var d=c.height(),e=parseInt(b.attr("layoutH")),d=50<d-e?d-e:50;b.isTag("table")?b.removeAttr("layoutH").wrap('\x3cdiv layoutH\x3d"'+e+'" style\x3d"overflow:auto;height:'+d+'px"\x3e\x3c/div\x3e'):b.height(d).css("overflow","auto")})},hoverClass:function(c,b){var d=c||"hover";return this.each(function(){var c=a(this),g;c.hover(function(){g&&clearTimeout(g);c.addClass(d)},function(){g=setTimeout(function(){c.removeClass(d)},b||10)})})},focusClass:function(c){var b=c||"textInputFocus";return this.each(function(){a(this).focus(function(){a(this).addClass(b)}).blur(function(){a(this).removeClass(b)})})},inputAlert:function(){return this.each(function(){function c(){return d.parent().find("label.alt")}function b(a){var b=d.position();return{width:d.width(),top:b.top+"px",left:b.left+"px",opacity:a||1}}var d=a(this);if(1>c().size()){d.attr("id")||d.attr("id",d.attr("name")+"_"+Math.round(1E4*Math.random()));var e=a('\x3clabel class\x3d"alt" for\x3d"'+d.attr("id")+'"\x3e'+d.attr("alt")+"\x3c/label\x3e").appendTo(d.parent());e.css(b(1));d.val()&&e.hide()}d.focus(function(){c().css(b(.3))}).blur(function(){a(this).val()||c().show().css("opacity",1)}).keydown(function(){c().hide()})})},isTag:function(c){return c?a(this)[0].tagName.toLowerCase()==c?!0:!1:!1},isBind:function(c){var b=a(this).data("events");return b&&c&&b[c]},log:function(a){return this.each(function(){console&&console.log("%s: %o",a,this)})}});a.extend(String.prototype,{isPositiveInteger:function(){return(new RegExp(/^[1-9]\d*$/)).test(this)},isInteger:function(){return(new RegExp(/^\d+$/)).test(this)},isNumber:function(a,b){return(new RegExp(/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/)).test(this)},trim:function(){return this.replace(/(^\s*)|(\s*$)|\r|\n/g,"")},startsWith:function(a){return 0===this.indexOf(a)},endsWith:function(a){var b=this.length-a.length;return 0<=b&&this.lastIndexOf(a)===b},replaceSuffix:function(a){return this.replace(/\[[0-9]+\]/,"["+a+"]").replace("#index#",a)},trans:function(){return this.replace(/&lt;/g,"\x3c").replace(/&gt;/g,"\x3e").replace(/&quot;/g,'"')},encodeTXT:function(){return this.replaceAll("\x26","\x26amp;").replaceAll("\x3c","\x26lt;").replaceAll("\x3e","\x26gt;").replaceAll(" ","\x26nbsp;")},replaceAll:function(a,b){return this.replace(new RegExp(a,"gm"),b)},replaceTm:function(a){return a?this.replace(RegExp("({[A-Za-z_]+[A-Za-z0-9_]*})","g"),function(b){return a[b.replace(/[{}]+/g,"")]}):this},replaceTmById:function(c){var b=c||a(document);return this.replace(RegExp("({[A-Za-z_]+[A-Za-z0-9_]*})","g"),function(a){var c=b.find("#"+a.replace(/[{}]+/g,""));return c.val()?c.val():a})},isFinishedTm:function(){return!/{[A-Za-z_]+[A-Za-z0-9_]*}/.test(this)},skipChar:function(a){return this&&0!==this.length?this.charAt(0)===a?this.substring(1).skipChar(a):this:""},isValidPwd:function(){return(new RegExp(/^([_]|[a-zA-Z0-9]){6,32}$/)).test(this)},isValidMail:function(){return(new RegExp(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/)).test(this.trim())},isSpaces:function(){for(var a=0;a<this.length;a+=1){var b=this.charAt(a);if(" "!=b&&"\n"!=b&&"\t"!=b&&"\r"!=b)return!1}return!0},isPhone:function(){return(new RegExp(/(^([0-9]{3,4}[-])?\d{3,8}(-\d{1,6})?$)|(^\([0-9]{3,4}\)\d{3,8}(\(\d{1,6}\))?$)|(^\d{3,8}$)/)).test(this)},isUrl:function(){return(new RegExp(/^[a-zA-z]+:\/\/([a-zA-Z0-9\-\.]+)([-\w .\/?%&=:]*)$/)).test(this)},isExternalUrl:function(){return this.isUrl()&&-1==this.indexOf("://"+document.domain)}})})(jQuery);function Map(){this.elements=[];this.size=function(){return this.elements.length};this.isEmpty=function(){return 1>this.elements.length};this.clear=function(){this.elements=[]};this.put=function(a,c){this.remove(a);this.elements.push({key:a,value:c})};this.remove=function(a){try{for(i=0;i<this.elements.length;i++)if(this.elements[i].key==a)return this.elements.splice(i,1),!0}catch(c){}return!1};this.get=function(a){try{for(i=0;i<this.elements.length;i++)if(this.elements[i].key==a)return this.elements[i].value}catch(c){return null}};this.element=function(a){return 0>a||a>=this.elements.length?null:this.elements[a]};this.containsKey=function(a){try{for(i=0;i<this.elements.length;i++)if(this.elements[i].key==a)return!0}catch(c){}return!1};this.values=function(){var a=[];for(i=0;i<this.elements.length;i++)a.push(this.elements[i].value);return a};this.keys=function(){var a=[];for(i=0;i<this.elements.length;i++)a.push(this.elements[i].key);return a}}(function(a){a.fn.cssv=function(c){c=a(this).css(c);return 1*c.substring(0,c.indexOf("px"))};a.fn.jBar=function(c){var b=a.extend({container:"#container",collapse:".collapse",toggleBut:".toggleCollapse div",sideBar:"#sidebar",sideBar2:"#sidebar_s",splitBar:"#splitBar",splitBar2:"#splitBarProxy"},c);return this.each(function(){var d=a(b.sideBar2,this),e=a(b.sideBar,this);a(b.toggleBut,e).click(function(){DWZ.ui.sbar=!1;a(b.splitBar).hide();var c=d.cssv("left")+d.outerWidth()-e.outerWidth(),f=a(b.container).cssv("left")-(e.outerWidth()-d.outerWidth()),h=e.outerWidth()-d.outerWidth()+a(b.container).outerWidth();a(b.container).animate({left:f,width:h},50,function(){e.animate({left:c},500,function(){e.hide();d.show().css("left",-50).animate({left:5},200);a(window).trigger(DWZ.eventType.resizeGrid)})});a(b.collapse,d).click(function(){function f(){a(b.container).unbind("click",f);DWZ.ui.sbar||e.animate({left:c},500,function(){e.hide()})}var g=d.cssv("left")+d.outerWidth();e.is(":hidden")?(a(b.toggleBut,e).hide(),e.show().animate({left:g},500),a(b.container).click(f)):e.animate({left:c},500,function(){e.hide()});return!1});return!1});a(b.toggleBut,d).click(function(){DWZ.ui.sbar=!0;d.animate({left:-25},200,function(){e.show()});e.animate({left:5},800,function(){a(b.splitBar).show();a(b.toggleBut,e).show();var c=5+e.outerWidth()+a(b.splitBar).outerWidth(),f=a(b.container).outerWidth()-(c-a(b.container).cssv("left"));a(b.container).css({left:c,width:f});a(b.collapse,d).unbind("click");a(window).trigger(DWZ.eventType.resizeGrid)});return!1});a(b.splitBar).mousedown(function(d){a(b.splitBar2).each(function(){var f=a(this);setTimeout(function(){f.show()},100);f.css({visibility:"visible",left:a(b.splitBar).css("left")});f.jDrag(a.extend(c,{obj:a("#sidebar"),move:"horizontal",event:d,stop:function(){a(this).css("visibility","hidden");var c=a(this).cssv("left")-a(b.splitBar).cssv("left"),d=e.outerWidth()+c,f=a(b.container).cssv("left")+c,c=a(b.container).outerWidth()-c;e.css("width",d);a(b.splitBar).css("left",a(this).css("left"));a(b.container).css({left:f,width:c})}}));return!1})})})}})(jQuery);(function(a){function c(a,b){return function(){return a.apply(b,arguments)}}function b(b){if(a.data(this,"dwz-accordion")){var c=a.data(this,"dwz-accordion").options;c.running=b?0:--c.running;c.running||(c.clearStyle&&c.toShow.add(c.toHide).css({height:"",overflow:""}),a(this).triggerHandler("change.dwz-accordion",[c.data],c.change))}}function d(b){if(b=h.get(b)){var c=a(b).parent(),d=c.height()-a(".accordionHeader",b).size()*a(".accordionHeader:first-child",b).outerHeight()-2,e=c.children().not(b);a.each(e,function(b){d-=a(e[b]).outerHeight()});a(".accordionContent",b).height(d)}}function e(d,e,f,g,h){var k=a.data(this,"dwz-accordion").options;k.toShow=d;k.toHide=e;k.data=f;f=c(b,this);k.running=0==e.size()?d.size():e.size();if(k.animated)if(!k.alwaysOpen&&g)a.dwz.accordion.animations[k.animated]({toShow:jQuery([]),toHide:e,complete:f,down:h,autoheight:k.autoheight});else a.dwz.accordion.animations[k.animated]({toShow:d,toHide:e,complete:f,down:h,autoheight:k.autoheight});else!k.alwaysOpen&&g?d.toggle():(e.hide(),d.show()),f(!0)}function g(b){var c=a.data(this,"dwz-accordion").options;if(c.disabled)return!1;if(!b.target&&!c.alwaysOpen){c.active.find("h2").toggleClass(c.selectedClass);b=c.active.next();var d={instance:this,options:c,newHeader:jQuery([]),oldHeader:c.active,newContent:jQuery([]),oldContent:b},f=c.active=a([]);e.call(this,f,b,d);return!1}var g=a(b.target);if(g.parents(c.header).length)for(;!g.is(c.header);)g=g.parent();var k=g[0]==c.active[0];if(c.running||c.alwaysOpen&&k)return!1;if(g.is(c.header)){c.active.find("h2").toggleClass(c.selectedClass);k||g.find("h2").addClass(c.selectedClass);f=g.next();b=c.active.next();var d={instance:this,options:c,newHeader:g,oldHeader:c.active,newContent:f,oldContent:b},h=c.headers.index(c.active[0])>c.headers.index(g[0]);c.active=k?a([]):g;e.call(this,f,b,d,k,h);return!1}}function f(b,c){return void 0!=c?"number"==typeof c?b.filter(":eq("+c+")"):b.not(b.not(c)):!1===c?a([]):b.filter(":eq(0)")}var h=new Map;a.dwz=a.dwz||{};a(window).resize(function(){setTimeout(function(){for(var a=0;a<h.size();a++)d(h.element(a).key)},100)});a.fn.extend({accordion:function(b,c){var d=Array.prototype.slice.call(arguments,1);return this.each(function(){b.fillSpace&&h.put(b.fillSpace,this);if("string"==typeof b){var c=a.data(this,"dwz-accordion");c[b].apply(c,d)}else a(this).is(".dwz-accordion")||a.data(this,"dwz-accordion",new a.dwz.accordion(this,b))})},activate:function(a){return this.accordion("activate",a)}});a.dwz.accordion=function(b,c){this.options=c=a.extend({},a.dwz.accordion.defaults,c);this.element=b;a(b).addClass("dwz-accordion");if(c.navigation){var e=a(b).find("a").filter(c.navigationFilter);e.length&&(e.filter(c.header).length?c.active=e:(c.active=e.parent().parent().prev(),e.addClass("current")))}c.headers=a(b).find(c.header);c.active=f(c.headers,c.active);if(c.fillSpace)d(c.fillSpace);else if(c.autoheight){var k=0;c.headers.next().each(function(){k=Math.max(k,a(this).outerHeight())}).height(k)}c.headers.not(c.active||"").next().hide();c.active.find("h2").addClass(c.selectedClass);c.event&&a(b).bind(c.event+".dwz-accordion",g)};a.dwz.accordion.prototype={activate:function(a){g.call(this.element,{target:f(this.options.headers,a)[0]})},enable:function(){this.options.disabled=!1},disable:function(){this.options.disabled=!0},destroy:function(){this.options.headers.next().css("display","");(this.options.fillSpace||this.options.autoheight)&&this.options.headers.next().css("height","");a.removeData(this.element,"dwz-accordion");a(this.element).removeClass("dwz-accordion").unbind(".dwz-accordion")}};a.extend(a.dwz.accordion,{defaults:{selectedClass:"collapsable",alwaysOpen:!0,animated:"slide",event:"click",header:".accordionHeader",autoheight:!0,running:0,navigationFilter:function(){return this.href.toLowerCase()==location.href.toLowerCase()}},animations:{slide:function(b,c){b=a.extend({easing:"swing",duration:300},b,c);if(b.toHide.size()){var d=b.toHide.height(),e=b.toShow.height()/d;b.toShow.css({height:0}).show();b.toHide.filter(":hidden").each(b.complete).end().filter(":visible").animate({height:"hide"},{step:function(a){a=(d-a)*e;/msie|opera/.test(navigator.userAgent.toLowerCase())&&(a=Math.ceil(a));b.toShow.height(a)},duration:b.duration,easing:b.easing,complete:function(){b.autoheight||b.toShow.css({height:"auto"});b.toShow.css({overflow:"auto"});b.complete()}})}else b.toShow.animate({height:"show"},b)},bounceslide:function(a){this.slide(a,{easing:a.down?"bounceout":"swing",duration:a.down?1E3:200})},easeslide:function(a){this.slide(a,{easing:"easeinout",duration:700})}}})})(jQuery);function validateCallback(a,c,b){var d=$(a);if(!d.valid())return!1;var e=function(){d.find(":focus").blur();$.ajax({type:a.method||"POST",url:d.attr("action"),data:d.serializeArray(),dataType:"json",cache:!1,success:c||DWZ.ajaxDone,error:DWZ.ajaxError})};b?alertMsg.confirm(b,{okCall:e}):e();return!1}function iframeCallback(a,c){var b=$(a),d=$("#callbackframe");if(!b.valid())return!1;0==d.size()&&(d=$("\x3ciframe id\x3d'callbackframe' name\x3d'callbackframe' src\x3d'about:blank' style\x3d'display:none'\x3e\x3c/iframe\x3e").appendTo("body"));a.ajax||b.append('\x3cinput type\x3d"hidden" name\x3d"ajax" value\x3d"1" /\x3e');a.target="callbackframe";b.find(":focus").blur();_iframeResponse(d[0],c||DWZ.ajaxDone)}function _iframeResponse(a,c){var b=$(a),d=$(document);d.trigger("ajaxStart");b.bind("load",function(e){b.unbind("load");d.trigger("ajaxStop");if(!("javascript:'%3Chtml%3E%3C/html%3E';"==a.src||"javascript:'\x3chtml\x3e\x3c/html\x3e';"==a.src||(e=a.contentDocument||a.document,e.readyState&&"complete"!=e.readyState)||e.body&&"false"==e.body.innerHTML)){var g;if(e.XMLDocument)g=e.XMLDocument;else if(e.body)try{g=b.contents().find("body").text(),g=jQuery.parseJSON(g)}catch(f){g=e.body.innerHTML}else g=e;c(g)}})}function navTabAjaxDone(a){DWZ.ajaxDone(a);if(a[DWZ.keys.statusCode]==DWZ.statusCode.ok){if(a.navTabId)navTab.reloadFlag(a.navTabId);else{var c=$("#pagerForm",navTab.getCurrentPanel()),c=0<c.size()?c.serializeArray():{};navTabPageBreak(c,a.rel)}"closeCurrent"==a.callbackType?setTimeout(function(){navTab.closeCurrentTab(a.navTabId)},100):"forward"==a.callbackType?navTab.reload(a.forwardUrl):"forwardConfirm"==a.callbackType?alertMsg.confirm(a.confirmMsg||DWZ.msg("forwardConfirmMsg"),{okCall:function(){navTab.reload(a.forwardUrl)},cancelCall:function(){navTab.closeCurrentTab(a.navTabId)}}):navTab.getCurrentPanel().find(":input[initValue]").each(function(){var a=$(this).attr("initValue");$(this).val(a)})}}function dialogAjaxDone(a){DWZ.ajaxDone(a);if(a[DWZ.keys.statusCode]==DWZ.statusCode.ok||a[DWZ.keys.statusCode]==DWZ.statusCode.warn){if(a.navTabId){var c=$("body").data(a.navTabId);"undefined"!=typeof c?$.pdialog.reload(c.data("url"),{data:{},dialogId:a.navTabId,callback:null}):navTab.reload(a.forwardUrl,{navTabId:a.navTabId})}else c=$("#pagerForm",navTab.getCurrentPanel()),c=0<c.size()?c.serializeArray():{},navTabPageBreak(c,a.rel);"closeCurrent"==a.callbackType&&$.pdialog.closeCurrent()}}function navTabSearch(a,c){var b=$(a);a[DWZ.pageInfo.pageNum]&&(a[DWZ.pageInfo.pageNum].value=1);navTab.reload(b.attr("action"),{data:b.serializeArray(),navTabId:c});return!1}function dialogSearch(a){var c=$(a);a[DWZ.pageInfo.pageNum]&&(a[DWZ.pageInfo.pageNum].value=1);$.pdialog.reload(c.attr("action"),{data:c.serializeArray()});return!1}function dwzSearch(a,c){"dialog"==c?dialogSearch(a):navTabSearch(a);return!1}function divSearch(a,c){var b=$(a);a[DWZ.pageInfo.pageNum]&&(a[DWZ.pageInfo.pageNum].value=1);if(c){var d=$("#"+c);d.ajaxUrl({type:"POST",url:b.attr("action"),data:b.serializeArray(),callback:function(){d.find("[layoutH]").layoutH()}})}return!1}function _getPagerForm(a,c){var b=$("#pagerForm",a).get(0);b&&(c.pageNum&&(b[DWZ.pageInfo.pageNum].value=c.pageNum),c.numPerPage&&(b[DWZ.pageInfo.numPerPage].value=c.numPerPage),c.orderField&&(b[DWZ.pageInfo.orderField].value=c.orderField),c.orderDirection&&b[DWZ.pageInfo.orderDirection]&&(b[DWZ.pageInfo.orderDirection].value=c.orderDirection));return b}function dwzPageBreak(a){a=$.extend({targetType:"navTab",rel:"",data:{pageNum:"",numPerPage:"",orderField:"",orderDirection:""},callback:null},a);var c="dialog"==a.targetType?$.pdialog.getCurrent():navTab.getCurrentPanel();try{var b=$("#pagerForm",c),d=$("form[rel\x3d'pagerForm']",c);if(1==d.length){var e="",g;b.find("input[type\x3d'hidden']").each(function(){e=$(this).prop("name");g=d.find("input[id\x3d'"+e+"']");1!=g.length&&(g=d.find("select[id\x3d'"+e+"']"));1==g.length&&$(this).val(g.val())})}}catch(h){}if(a.rel){var f=c.find("#"+a.rel);(b=_getPagerForm(f,a.data))&&f.ajaxUrl({type:"POST",url:$(b).attr("action"),data:$(b).serializeArray(),callback:function(){f.find("[layoutH]").layoutH()}})}else b=_getPagerForm(c,a.data),c=$(b).serializeArray(),"dialog"==a.targetType?b&&$.pdialog.reload($(b).attr("action"),{data:c,callback:a.callback}):b&&navTab.reload($(b).attr("action"),{data:c,callback:a.callback})}function navTabPageBreak(a,c){dwzPageBreak({targetType:"navTab",rel:c,data:a})}function dialogPageBreak(a,c){dwzPageBreak({targetType:"dialog",rel:c,data:a})}function ajaxTodo(a,c){var b=c||navTabAjaxDone;$.isFunction(b)||(b=eval("("+c+")"));$.ajax({type:"POST",url:a,dataType:"json",cache:!1,success:b,error:DWZ.ajaxError})}function uploadifyQueueComplete(a){var c="The total number of files uploaded: "+a.uploadsSuccessful+"\x3cbr/\x3eThe total number of errors while uploading: "+a.uploadsErrored+"\x3cbr/\x3eThe total number of bytes uploaded: "+a.queueBytesUploaded+"\x3cbr/\x3eThe average speed of all uploaded files: "+a.averageSpeed;a.uploadsErrored?alertMsg.error(c):alertMsg.correct(c)}function uploadifySuccess(a,c,b){alert(c)}function uploadifyError(a,c,b){alertMsg.error(c+": "+b)}function uploadifyError(a,c,b,d){alert("event:"+a+"\nqueueId:"+c+"\nfileObj.name:"+b.name+"\nerrorObj.type:"+d.type+"\nerrorObj.info:"+d.info)}$.fn.extend({ajaxTodo:function(){return this.each(function(){var a=$(this);a.click(function(c){if(a.hasClass("disabled"))return!1;var b=unescape(a.attr("href")).replaceTmById($(c.target).parents(".unitBox:first"));DWZ.debug(b);if(!b.isFinishedTm())return alertMsg.error(a.attr("warn")||DWZ.msg("alertSelectMsg")),!1;var d=a.attr("title");d?alertMsg.confirm(d,{okCall:function(){ajaxTodo(b,a.attr("callback"))}}):ajaxTodo(b,a.attr("callback"));c.preventDefault()})})},dwzExport:function(){function a(a){var b="dialog"==a.attr("targetType")?$.pdialog.getCurrent():navTab.getCurrentPanel(),c=$("#pagerForm",b);try{var e=$("form[rel\x3d'pagerForm']",b);if(1==e.length){var g="",f;c.find("input[type\x3d'hidden']").each(function(){g=$(this).prop("name");f=e.find("input[id\x3d'"+g+"']");1!=f.length&&(f=e.find("select[id\x3d'"+g+"']"));1==f.length&&$(this).val(f.val())})}}catch(h){}a=a.attr("href");b=$("#callbackframe");0==b.size()&&(b=$("\x3ciframe id\x3d'callbackframe' name\x3d'callbackframe' src\x3d'about:blank' style\x3d'display:none'\x3e\x3c/iframe\x3e").appendTo("body"));b=c[0].action;c[0].action=a;c[0].target="callbackframe";c.submit();c[0].action=b}return this.each(function(){var c=$(this);c.click(function(b){var d=c.attr("title");d?alertMsg.confirm(d,{okCall:function(){a(c)}}):a(c);b.preventDefault()})})}});$.setRegional("alertMsg",{title:{error:"Error",info:"Information",warn:"Warning",correct:"Successful",confirm:"Confirmation"},butMsg:{ok:"OK",yes:"Yes",no:"No",cancel:"Cancel"}});var alertMsg={_boxId:"#alertMsgBox",_bgId:"#alertBackground",_closeTimer:null,_types:{error:"error",info:"info",warn:"warn",correct:"correct",confirm:"confirm"},_getTitle:function(a){return $.regional.alertMsg.title[a]},_keydownOk:function(a){a.keyCode==DWZ.keyCode.ENTER&&a.data.target.trigger("click");return!1},_keydownEsc:function(a){a.keyCode==DWZ.keyCode.ESC&&a.data.target.trigger("click")},_open:function(a,c,b){$(this._boxId).remove();var d="";if(b)for(var e=0;e<b.length;e++)var g=b[e].call?"callback":"",d=d+DWZ.frag.alertButFrag.replace("#butMsg#",b[e].name).replace("#callback#",g);e=DWZ.frag.alertBoxFrag.replace("#type#",a).replace("#title#",this._getTitle(a)).replace("#message#",c).replace("#butFragment#",d);$(e).appendTo("body").css({top:-$(this._boxId).height()+"px"}).animate({top:"0px"},500);this._closeTimer&&(clearTimeout(this._closeTimer),this._closeTimer=null);this._types.info==a||this._types.correct==a?this._closeTimer=setTimeout(function(){alertMsg.close()},3500):$(this._bgId).show();a=$(this._boxId).find("a.button");c=a.filter("[rel\x3dcallback]");d=$(document);for(e=0;e<b.length;e++)b[e].call&&c.eq(e).click(b[e].call),b[e].keyCode==DWZ.keyCode.ENTER&&d.bind("keydown",{target:a.eq(e)},this._keydownOk),b[e].keyCode==DWZ.keyCode.ESC&&d.bind("keydown",{target:a.eq(e)},this._keydownEsc)},close:function(){$(document).unbind("keydown",this._keydownOk).unbind("keydown",this._keydownEsc);$(this._boxId).animate({top:-$(this._boxId).height()},500,function(){$(this).remove()});$(this._bgId).hide()},error:function(a,c){this._alert(this._types.error,a,c)},info:function(a,c){this._alert(this._types.info,a,c)},warn:function(a,c){this._alert(this._types.warn,a,c)},correct:function(a,c){this._alert(this._types.correct,a,c)},_alert:function(a,c,b){var d={okName:$.regional.alertMsg.butMsg.ok,okCall:null};$.extend(d,b);this._open(a,c,[{name:d.okName,call:d.okCall,keyCode:DWZ.keyCode.ENTER}])},confirm:function(a,c){var b={okName:$.regional.alertMsg.butMsg.ok,okCall:null,cancelName:$.regional.alertMsg.butMsg.cancel,cancelCall:null};$.extend(b,c);this._open(this._types.confirm,a,[{name:b.okName,call:b.okCall,keyCode:DWZ.keyCode.ENTER},{name:b.cancelName,call:b.cancelCall,keyCode:DWZ.keyCode.ESC}])}};(function(a){a.fn.extend({checkboxCtrl:function(c){return this.each(function(){var b=a(this);b.click(function(){var d=b.attr("group");if(b.is(":checkbox")){var e=b.is(":checked")?"all":"none";d&&a.checkbox.select(d,e,c)}else d&&a.checkbox.select(d,b.attr("selectType")||"all",c)})})}});a.checkbox={selectAll:function(a,b){this.select(a,"all",b)},unSelectAll:function(a,b){this.select(a,"none",b)},selectInvert:function(a,b){this.select(a,"invert",b)},select:function(c,b,d){c=a(d||document).find(":checkbox[name\x3d'"+c+"']");switch(b){case "invert":c.each(function(){this.checked=!this.checked});break;case "none":c.removeAttr("checked");break;default:c.each(function(){this.checked=!0})}c.trigger("change")}}})(jQuery);(function(a){var c=[],b=function(d){a.each(c,function(e){c[e]!=d&&(a("#"+c[e])[0]?a("#op_"+c[e]).css({height:"",width:""}).hide():a("#op_"+c[e]).remove(),a(document).unbind("click",b))})},d=function(b){var c=a("#"+b.data.ref);if(0==c.size())return!1;a.ajax({type:"POST",dataType:"json",url:b.data.refUrl.replace("{value}",encodeURIComponent(b.data.$this.val())),cache:!1,data:{},success:function(b){if(b){var d="";a.each(b,function(a){b[a]&&1<b[a].length&&(d+='\x3coption value\x3d"'+b[a][0]+'"\x3e'+b[a][1]+"\x3c/option\x3e")});var e=c.parents("div.combox:first");c.html(d).insertAfter(e);e.remove();c.trigger("change").combox()}},error:DWZ.ajaxError})};a.extend(a.fn,{comboxSelect:function(d){var e=a.extend({selector:"\x3ea"},d);return this.each(function(){var d=a(this),g=a(e.selector,d);c.push(d.attr("id"));a(e.selector,d).click(function(){var c=a("#op_"+d.attr("id"));if(c.is(":hidden")){300<c.height()&&c.css({height:"300px",overflow:"scroll"});var e=d.offset().top+d[0].offsetHeight-50;e+c.height()>a(window).height()-20&&(e=a(window).height()-20-c.height());c.css({top:e,left:d.offset().left}).show();b(d.attr("id"));a(document).click(b)}else a(document).unbind("click",b),b();return!1});a("#op_"+d.attr("id")).find("\x3eli").comboxOption(g,d)})},comboxOption:function(b,c){return this.each(function(){a("\x3ea",this).click(function(){var d=a(this);d.parent().parent().find(".selected").removeClass("selected");d.addClass("selected");b.text(d.text());a("select",c).val()!=d.attr("value")&&a("select",c).val(d.attr("value")).trigger("change")})})},combox:function(){var b=[];a.each(c,function(d){a("#"+c[d])[0]?b.push(c[d]):a("#op_"+c[d]).remove()});c=b;return this.each(function(b){b=a(this).removeClass("combox");var c=b.attr("name"),e=b.val(),g=a('option[value\x3d"'+e+'"]',b).text(),n=b.attr("ref"),q=b.attr("refUrl")||"",l=b.attr("id")||Math.round(1E7*Math.random()),c='\x3cdiv class\x3d"combox"\x3e\x3cdiv id\x3d"combox_'+l+'" class\x3d"select"'+(n?' ref\x3d"'+n+'"':"")+"\x3e"+('\x3ca href\x3d"javascript:" class\x3d"'+b.attr("class")+'" name\x3d"'+c+'" value\x3d"'+e+'"\x3e'+g+"\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e"),v='\x3cul class\x3d"comboxop" id\x3d"op_combox_'+l+'"\x3e';a("option",b).each(function(){var b=a(this);v+='\x3cli\x3e\x3ca class\x3d"'+(e==b[0].value?"selected":"")+'" href\x3d"#" value\x3d"'+b[0].value+'"\x3e'+b[0].text+"\x3c/a\x3e\x3c/li\x3e"});v+="\x3c/ul\x3e";a("body").append(v);b.after(c);a("div.select",b.next()).comboxSelect().append(b);n&&q&&b.unbind("change",d).bind("change",{ref:n,refUrl:q,$this:b},d)})}})})(jQuery);(function(a){function c(c,h,k,n){var f=g[c];c=a(DWZ.frag[f.id]);c.find("li").hoverClass();d.html(c);a.each(f.bindings,function(c,e){a("[rel\x3d'"+c+"']",d).bind("click",function(c){b();e(a(h),a("#"+f.id))})});c=k.pageX;k=k.pageY;a(window).width()<c+d.width()&&(c-=d.width());a(window).height()<k+d.height()&&(k-=d.height());d.css({left:c,top:k}).show();f.shadow&&e.css({width:d.width(),height:d.height(),left:c+3,top:k+3}).show();a(document).one("click",b);a.isFunction(f.ctrSub)&&f.ctrSub(a(h),a("#"+f.id))}function b(){d.hide();e.hide()}var d,e,g;a.fn.extend({contextMenu:function(b,h){var f=a.extend({shadow:!0,bindings:{},ctrSub:null},h);d||(d=a('\x3cdiv id\x3d"contextmenu"\x3e\x3c/div\x3e').appendTo("body").hide());e||(e=a('\x3cdiv id\x3d"contextmenuShadow"\x3e\x3c/div\x3e').appendTo("body").hide());g=g||[];g.push({id:b,shadow:f.shadow,bindings:f.bindings||{},ctrSub:f.ctrSub});var n=g.length-1;a(this).bind("contextmenu",function(a){c(n,this,a,f);return!1});return this}})})(jQuery);(function(a){a.fn.extend({cssTable:function(c){return this.each(function(){var b=a(this),c=b.find("tbody\x3etr"),e=b.parent(),g=b.hasClass("nowrap");c.hoverClass("hover").each(function(b){var d=a(this);g||1!=b%2||d.addClass("trbg");d.click(function(){c.filter(".selected").removeClass("selected");d.addClass("selected");var b=d.attr("target");b&&(0==a("#"+b,e).size()&&e.prepend('\x3cinput id\x3d"'+b+'" type\x3d"hidden" /\x3e'),a("#"+b,e).val(d.attr("rel")))})});b.find("thead [orderField]").orderBy({targetType:b.attr("targetType"),rel:b.attr("rel"),asc:b.attr("asc")||"asc",desc:b.attr("desc")||"desc"})})}})})(jQuery);(function(a){var c={currentGroup:"",suffix:"",$target:null,pk:"id",callback:null},b={_lookupPrefix:function(a){return c.currentGroup+(c.currentGroup?".":"")+a+c.suffix},lookupPk:function(a){return this._lookupPrefix(a)},lookupField:function(a){return this.lookupPk(a)}};a.extend({bringBackSuggest:function(d){c.$target.parents(".unitBox:first").find(":input").each(function(){var e=a(this),g=e.attr("name"),f;for(f in d)if((c.pk==f?b.lookupPk(f):b.lookupField(f))==g){e.val(d[f]);break}})},bringBack:function(b){a.bringBackSuggest(b);b=c.callback;try{eval(b+";")}catch(e){}a.pdialog.closeCurrent()}});a.fn.extend({lookup:function(){return this.each(function(){var b=a(this),e={mask:!0,width:b.attr("width")||820,height:b.attr("height")||400,maxable:eval(b.attr("maxable")||"true"),resizable:eval(b.attr("resizable")||"true")};b.click(function(d){c=a.extend(c,{currentGroup:b.attr("lookupGroup")||"",callback:b.attr("callback"),suffix:b.attr("suffix")||"",$target:b,pk:b.attr("lookupPk")||"id"});d=unescape(b.attr("href")).replaceTmById(a(d.target).parents(".unitBox:first"));if(!d.isFinishedTm())return alertMsg.error(b.attr("warn")||DWZ.msg("alertSelectMsg")),!1;a.pdialog.open(d,"_blank",b.attr("title")||b.text(),e);return!1})})},multLookup:function(){return this.each(function(){var b=a(this),c={};b.click(function(d){b.parents(".unitBox:first").find("[name\x3d'"+b.attr("multLookup")+"']").filter(":checked").each(function(){var b=DWZ.jsonEval(a(this).val()),d;for(d in b)c[d]=(c[d]?c[d]+",":"")+b[d]});if(a.isEmptyObject(c))return alertMsg.error(b.attr("warn")||DWZ.msg("alertSelectMsg")),!1;a.bringBack(c)})})},suggest:function(){var d=-1;return this.each(function(){function e(d){var e=h.offset(),n=e.top+this.offsetHeight,v=a("#suggest");0==v.size()&&(v=a('\x3cdiv id\x3d"suggest"\x3e\x3c/div\x3e').appendTo(a("body")));v.css({left:e.left+"px",top:n+"px"}).show();c=a.extend(c,{currentGroup:h.attr("lookupGroup")||"",suffix:h.attr("suffix")||"",$target:h,pk:h.attr("lookupPk")||"id"});e=unescape(h.attr("suggestUrl")).replaceTmById(a(d.target).parents(".unitBox:first"));if(!e.isFinishedTm())return alertMsg.error(h.attr("warn")||DWZ.msg("alertSelectMsg")),!1;n={};n[h.attr("postField")||"inputValue"]=h.val();var w=h.attr("callback");a.ajax({global:!1,type:"POST",dataType:"json",url:e,cache:!1,data:n,success:function(e){if(e){var f="";a.each(e,function(a){var b="",c="";for(a=0;a<k.length;a++){var d=this[k[a]];d&&(c&&(c+="-"),c+=d)}for(var e in this)b&&(b+=","),b+=e+":'"+this[e]+"'";f+='\x3cli lookupAttrs\x3d"'+b+'"\x3e'+c+"\x3c/li\x3e"});e=v.html("\x3cul\x3e"+f+"\x3c/ul\x3e").find("li");e.hoverClass("selected").click(function(){g(a(this));try{eval(w+";")}catch(x){}});if(1==e.size()&&d.keyCode!=DWZ.keyCode.BACKSPACE)g(e.eq(0));else if(0==e.size()){e="";for(var h=0;h<k.length&&b.lookupField(k[h])!=d.target.name;h++)e&&(e+=","),e+=k[h]+":''";e="{"+c.pk+":'',"+e+"}";a.bringBackSuggest(DWZ.jsonEval(e))}}},error:function(){v.html("")}});a(document).bind("click",f);return!1}function g(b){b="{"+b.attr("lookupAttrs")+"}";a.bringBackSuggest(DWZ.jsonEval(b))}function f(){a("#suggest").html("").hide();d=-1;a(document).unbind("click",f)}var h=a(this).attr("autocomplete","off").keydown(function(b){if(b.keyCode==DWZ.keyCode.ENTER&&a("#suggest").is(":visible"))return!1}),k=h.attr("suggestFields").split(",");h.focus(e).click(!1).keyup(function(b){var c=a("#suggest").find("li");switch(b.keyCode){case DWZ.keyCode.ESC:case DWZ.keyCode.TAB:case DWZ.keyCode.SHIFT:case DWZ.keyCode.HOME:case DWZ.keyCode.END:case DWZ.keyCode.LEFT:case DWZ.keyCode.RIGHT:break;case DWZ.keyCode.ENTER:f();break;case DWZ.keyCode.DOWN:d>=c.size()-1?d=-1:d++;break;case DWZ.keyCode.UP:0>d?d=c.size()-1:d--;break;default:e(b)}c.removeClass("selected");0<=d&&(b=c.eq(d).addClass("selected"),g(b))})})},itemDetail:function(){function b(b){b.find("\x3etr").each(function(b){a(":input, a.btnLook, a.btnAttach",this).each(function(){var c=a(this),d=c.attr("name"),e=c.val();d&&c.attr("name",d.replaceSuffix(b));(d=c.attr("lookupGroup"))&&c.attr("lookupGroup",d.replaceSuffix(b));(d=c.attr("suffix"))&&c.attr("suffix",d.replaceSuffix(b));e&&0<=e.indexOf("#index#")&&c.val(e.replace("#index#",b+1))})})}function c(b){var c="",d="";b.name.endsWith("[#index#]")?d="[#index#]":b.name.endsWith("[]")&&(d="[]");var e=d?' suffix\x3d"'+d+'" ':"",f="";if(b.fieldAttrs){var g=DWZ.jsonEval(b.fieldAttrs),v;for(v in g)f+=v+'\x3d"'+g[v]+'"'}switch(b.type){case "del":c='\x3ca href\x3d"javascript:void(0)" class\x3d"btnDel '+b.fieldClass+'"\x3e\u5220\u9664\x3c/a\x3e';break;case "lookup":f="";b.suggestFields&&(f='autocomplete\x3d"off" lookupGroup\x3d"'+b.lookupGroup+'"'+e+' suggestUrl\x3d"'+b.suggestUrl+'" suggestFields\x3d"'+b.suggestFields+'" postField\x3d"'+b.postField+'"');c='\x3cinput type\x3d"hidden" name\x3d"'+b.lookupGroup+"."+b.lookupPk+d+'"/\x3e\x3cinput type\x3d"text" name\x3d"'+b.name+'"'+f+' lookupPk\x3d"'+b.lookupPk+'" size\x3d"'+b.size+'" class\x3d"'+b.fieldClass+'"/\x3e\x3ca class\x3d"btnLook" href\x3d"'+b.lookupUrl+'" lookupGroup\x3d"'+b.lookupGroup+'" '+f+' lookupPk\x3d"'+b.lookupPk+'" title\x3d"\u67e5\u627e\u5e26\u56de"\x3e\u67e5\u627e\u5e26\u56de\x3c/a\x3e';break;case "attach":c='\x3cinput type\x3d"hidden" name\x3d"'+b.lookupGroup+"."+b.lookupPk+d+'"/\x3e\x3cinput type\x3d"text" name\x3d"'+b.name+'" size\x3d"'+b.size+'" readonly\x3d"readonly" class\x3d"'+b.fieldClass+'"/\x3e\x3ca class\x3d"btnAttach" href\x3d"'+b.lookupUrl+'" lookupGroup\x3d"'+b.lookupGroup+'" '+e+' lookupPk\x3d"'+b.lookupPk+'" width\x3d"560" height\x3d"300" title\x3d"\u67e5\u627e\u5e26\u56de"\x3e\u67e5\u627e\u5e26\u56de\x3c/a\x3e';break;case "enum":a.ajax({type:"POST",dataType:"html",async:!1,url:b.enumUrl,data:{inputName:b.name},success:function(a){c=a}});break;case "date":c='\x3cinput type\x3d"text" name\x3d"'+b.name+'" value\x3d"'+b.defaultVal+'" class\x3d"date '+b.fieldClass+'" dateFmt\x3d"'+b.patternDate+'" size\x3d"'+b.size+'"/\x3e\x3ca class\x3d"inputDateButton" href\x3d"javascript:void(0)"\x3e\u9009\u62e9\x3c/a\x3e';break;default:c='\x3cinput type\x3d"'+b.type+'" name\x3d"'+b.name+'" value\x3d"'+b.defaultVal+'" size\x3d"'+b.size+'" class\x3d"'+b.fieldClass+'" '+f+"/\x3e"}return"\x3ctd\x3e"+c+"\x3c/td\x3e"}function g(b){var d="";a(b).each(function(){d+=c(this)});return'\x3ctr class\x3d"unitBox"\x3e'+d+"\x3c/tr\x3e"}return this.each(function(){var c=a(this).css("clear","both"),d=c.find("tbody"),e=[];c.find("tr:first th[type]").each(function(b){b=a(this);b={type:b.attr("type")||"text",patternDate:b.attr("dateFmt")||"yyyy-MM-dd",name:b.attr("name")||"",defaultVal:b.attr("defaultVal")||"",size:b.attr("size")||"12",enumUrl:b.attr("enumUrl")||"",lookupGroup:b.attr("lookupGroup")||"",lookupUrl:b.attr("lookupUrl")||"",lookupPk:b.attr("lookupPk")||"id",suggestUrl:b.attr("suggestUrl"),suggestFields:b.attr("suggestFields"),postField:b.attr("postField")||"",fieldClass:b.attr("fieldClass")||"",fieldAttrs:b.attr("fieldAttrs")||""};e.push(b)});d.find("a.btnDel").click(function(){function c(){a.ajax({type:"POST",dataType:"json",url:e.attr("href"),cache:!1,success:function(){e.parents("tr:first").remove();b(d)},error:DWZ.ajaxError})}var e=a(this);if(e.is("[href^\x3djavascript:]"))return e.parents("tr:first").remove(),b(d),!1;e.attr("title")?alertMsg.confirm(e.attr("title"),{okCall:c}):c();return!1});var n=c.attr("addButton")||"Add New",n=a('\x3cdiv class\x3d"button"\x3e\x3cdiv class\x3d"buttonContent"\x3e\x3cbutton type\x3d"button"\x3e'+n+"\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e").insertBefore(c).find("button"),q=a('\x3cinput type\x3d"text" name\x3d"dwz_rowNum" class\x3d"textInput" style\x3d"margin:2px;" value\x3d"1" size\x3d"2"/\x3e').insertBefore(c),l="";n.click(function(){l||(l=g(e));var c=1;try{c=parseInt(q.val())}catch(r){}for(var f=0;f<c;f++)a(l).appendTo(d).initUI().find("a.btnDel").click(function(){a(this).parents("tr:first").remove();b(d);return!1});b(d)})})},selectedTodo:function(){function b(b,c){var d="";("dialog"==c?a.pdialog.getCurrent():navTab.getCurrentPanel()).find("input:checked").filter("[name\x3d'"+b+"']").each(function(b){var c=a(this).val();d+=0==b?c:","+c});return d}return this.each(function(){var c=a(this),d=c.attr("rel")||"ids",f=c.attr("postType")||"map";c.click(function(){function e(){a.ajax({type:"POST",url:c.attr("href"),dataType:"json",cache:!1,data:function(){if("map"==f)return a.map(n.split(","),function(a,b){return{name:d,value:a}});var b={};b[d]=n;return b}(),success:q,error:DWZ.ajaxError})}var g=c.attr("targetType"),n=b(d,g);if(!n)return alertMsg.error(c.attr("warn")||DWZ.msg("alertSelectMsg")),!1;var q=c.attr("callback")||("dialog"==g?dialogAjaxDone:navTabAjaxDone);a.isFunction(q)||(q=eval("("+q+")"));(g=c.attr("title"))?alertMsg.confirm(g,{okCall:e}):e();return!1})})}})})(jQuery);(function(a){a.setRegional("datepicker",{dayNames:"Sun Mon Tue Wed Thu Fri Sat".split(" "),monthNames:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});a.fn.datepicker=function(b){function d(b){var c=a(h.tmBox$);c.removeClass("hh").removeClass("mm").removeClass("ss");b&&(c.addClass(b),a(h.tmInputs$).removeClass("slt").filter("."+b).addClass("slt"))}function e(b,c){a(h.tmBox$).find("."+c+" li").each(function(){var c=a(this);c.click(function(){b.val(c.text())})})}function g(a){if(!(48<=a.keyCode&&57>=a.keyCode||a.keyCode==DWZ.keyCode.DELETE||a.keyCode==DWZ.keyCode.BACKSPACE))return!1}function f(a,b){var c=parseInt(a.val()),d=parseInt(a.attr("start"))||0,e=parseInt(a.attr("end")),f=parseInt(a.attr("step")||1);1==b?c<=e-f&&a.val(c+f):-1==b?c>=d+f&&a.val(c-f):c>e?a.val(e):c<d&&a.val(d)}var h={box$:"#calendar",year$:"#calendar [name\x3dyear]",month$:"#calendar [name\x3dmonth]",tmInputs$:"#calendar .time :text",hour$:"#calendar .time .hh",minute$:"#calendar .time .mm",second$:"#calendar .time .ss",tmBox$:"#calendar .tm",tmUp$:"#calendar .time .up",tmDown$:"#calendar .time .down",close$:"#calendar .close",calIcon$:"a.inputDateButton",main$:"#calendar .main",days$:"#calendar .days",dayNames$:"#calendar .dayNames",clearBut$:"#calendar .clearBut",okBut$:"#calendar .okBut"};return this.each(function(){function k(b){var c=b.getDateWrap(),k=b.getMinDate(),l=b.getMaxDate(),t=new Date(c.year,c.month-1,1),m=t.getDay(),x="";if(0<m){t.setMonth(t.getMonth()-1);for(var t=b.getDateWrap(t),p=t.days-m+1;p<=t.days;p++)var u=new Date(c.year,c.month-2,p),u=u>=k&&u<=l?"":"disabled",x=x+('\x3cdd class\x3d"other '+u+'" chMonth\x3d"-1" day\x3d"'+p+'"\x3e'+p+"\x3c/dd\x3e")}for(p=1;p<=c.days;p++)u=new Date(c.year,c.month-1,p),u=u>=k&&u<=l?"":"disabled",x=p==c.day?x+('\x3cdd class\x3d"slt '+u+'" day\x3d"'+p+'"\x3e'+p+"\x3c/dd\x3e"):x+('\x3cdd class\x3d"'+u+'" day\x3d"'+p+'"\x3e'+p+"\x3c/dd\x3e");for(p=1;p<=42-m-c.days;p++)u=new Date(c.year,c.month,p),u=u>=k&&u<=l?"":"disabled",x+='\x3cdd class\x3d"other '+u+'" chMonth\x3d"1" day\x3d"'+p+'"\x3e'+p+"\x3c/dd\x3e";var z=a(h.days$).html(x).find("dd");z.not(".disabled").click(function(){var c=a(this);b.hasTime()?(z.removeClass("slt"),c.addClass("slt")):(q.val(b.formatDate(b.changeDay(c.attr("day"),c.attr("chMonth")))),n())});b.hasDate()||a(h.main$).addClass("nodate");if(b.hasTime()){a("#calendar .time").show();k=a(h.hour$).val(c.hour).focus(function(){d("hh")});l=parseInt(c.minute/b.opts.mmStep)*b.opts.mmStep;l=a(h.minute$).val(l).attr("step",b.opts.mmStep).focus(function(){d("mm")});c=a(h.second$).val(b.hasSecond()?c.second:0).attr("step",b.opts.ssStep).focus(function(){d("ss")});k.add(l).add(c).click(function(){return!1});e(k,"hh");e(l,"mm");e(c,"ss");a(h.box$).click(function(){d()});var A=a(h.tmInputs$);A.keydown(g).each(function(){var b=a(this);b.keyup(function(){f(b,0)})});a(h.tmUp$).click(function(){A.filter(".slt").each(function(){f(a(this),1)})});a(h.tmDown$).click(function(){A.filter(".slt").each(function(){f(a(this),-1)})});b.hasHour()||k.attr("disabled",!0);b.hasMinute()||l.attr("disabled",!0);b.hasSecond()||c.attr("disabled",!0)}}function n(){a(h.box$).remove();a(document).unbind("click",n)}var q=a(this);new c(q.val(),b);q.click(function(d){n();var e=new c(q.val(),b);d=q.offset();var f=d.top+this.offsetHeight;a(DWZ.frag.calendarFrag).appendTo("body").css({left:d.left+"px",top:f+"px"}).show().click(function(a){a.stopPropagation()});a.fn.bgiframe&&a(h.box$).bgiframe();var g="";a.each(a.regional.datepicker.dayNames,function(a,b){g+="\x3cdt\x3e"+b+"\x3c/dt\x3e"});a(h.dayNames$).html(g);var l=e.getDateWrap(),m=a(h.year$),x=e.getMinDate().getFullYear(),p=e.getMaxDate().getFullYear();for(y=x;y<=p;y++)m.append('\x3coption value\x3d"'+y+'"'+(l.year==y?'selected\x3d"selected"':"")+"\x3e"+y+"\x3c/option\x3e");var u=a(h.month$);a.each(a.regional.datepicker.monthNames,function(a,b){var c=a+1;u.append('\x3coption value\x3d"'+c+'"'+(l.month==c?'selected\x3d"selected"':"")+"\x3e"+b+"\x3c/option\x3e")});k(e);m.add(u).change(function(){e.changeDate(m.val(),u.val());k(e)});x=a(h.box$).outerHeight(!0);f>x&&f>a(window).height()-x&&a(h.box$).css("top",d.top-x);a(h.close$).click(function(){n()});a(h.clearBut$).click(function(){q.val("");n()});a(h.okBut$).click(function(){var b=a(h.days$).find("dd.slt");if(b.hasClass("disabled"))return!1;b=e.changeDay(b.attr("day"),b.attr("chMonth"));e.hasTime()&&(b.setHours(parseInt(a(h.hour$).val())),b.setMinutes(parseInt(a(h.minute$).val())),b.setSeconds(parseInt(a(h.second$).val())));q.val(e.formatDate(b));n()});a(document).bind("click",n);return!1});q.parent().find(h.calIcon$).click(function(){q.trigger("click");return!1})})};var c=function(b,c){this.opts=a.extend({pattern:"yyyy-MM-dd",minDate:"1900-01-01",maxDate:"2099-12-31",mmStep:1,ssStep:1},c);var d=new Date;this.opts.minDate=d.formatDateTm(this.opts.minDate);this.opts.maxDate=d.formatDateTm(this.opts.maxDate);this.sDate=b.trim()};a.extend(c.prototype,{get:function(a){return this.opts[a]},_getDays:function(a,c){return 2==c?a%4||!(a%100)&&a%400?28:29:/4|6|9|11/.test(c)?30:31},_minMaxDate:function(a){var b=a.split("-").length-1,c="y-M-d";1==b?c="y-M":0==b&&(c="y");return a.parseDate(c)},getMinDate:function(){return this._minMaxDate(this.opts.minDate)},getMaxDate:function(){var a=this.opts.maxDate,c=a.split("-").length-1,a=this._minMaxDate(a);if(2>c){var e=this._getDays(a.getFullYear(),a.getMonth()+1);a.setDate(e);0==c&&a.setMonth(11)}return a},getDateWrap:function(a){a||(a=this.parseDate(this.sDate)||new Date);var b=a.getFullYear(),c=a.getMonth()+1,g=this._getDays(b,c);return{year:b,month:c,day:a.getDate(),hour:a.getHours(),minute:a.getMinutes(),second:a.getSeconds(),days:g,date:a}},changeDate:function(a,c,e){a=new Date(a,c-1,e||1);this.sDate=this.formatDate(a);return a},changeDay:function(a,c){c||(c=0);var b=this.getDateWrap();return this.changeDate(b.year,b.month+parseInt(c),a)},parseDate:function(a){return a?a.parseDate(this.opts.pattern):null},formatDate:function(a){return a.formatDate(this.opts.pattern)},hasHour:function(){return-1!=this.opts.pattern.indexOf("H")},hasMinute:function(){return-1!=this.opts.pattern.indexOf("m")},hasSecond:function(){return-1!=this.opts.pattern.indexOf("s")},hasTime:function(){return this.hasHour()||this.hasMinute()||this.hasSecond()},hasDate:function(){for(var a=["y","M","d","E"],c=0;c<a.length;c++)if(-1!=this.opts.pattern.indexOf(a[c]))return!0;return!1}})})(jQuery);(function(a){a.pdialog={_op:{height:300,width:580,minH:40,minW:50,total:20,max:!1,mask:!1,resizable:!0,drawable:!0,maxable:!0,minable:!0,fresh:!0},_current:null,_zIndex:42,getCurrent:function(){return this._current},reload:function(c,b){var d=a.extend({data:{},dialogId:"",callback:null},b),e=d.dialogId&&a("body").data(d.dialogId)||this._current;if(e){var g=e.find(".dialogContent");g.ajaxUrl({type:"POST",url:c,data:d.data,callback:function(b){g.find("[layoutH]").layoutH(g);a(".pageContent",e).width(a(e).width()-14);a(":button.close",e).click(function(){a.pdialog.close(e);return!1});a.isFunction(d.callback)&&d.callback(b)}})}},open:function(c,b,d,e){var g=a.extend({},a.pdialog._op,e),f=a("body").data(b);if(f){if(f.is(":hidden")&&f.show(),g.fresh||c!=a(f).data("url")){f.data("url",c);f.find(".dialogHeader").find("h1").html(d);this.switchDialog(f);var h=f.find(".dialogContent");h.ajaxUrl({type:e.type||"GET",url:c,data:e.data||{},callback:function(){h.find("[layoutH]").layoutH(h);a(".pageContent",f).width(a(f).width()-14);a("button.close").click(function(){a.pdialog.close(f);return!1})}})}}else a("body").append(DWZ.frag.dialogFrag),f=a("\x3e.dialog:last-child","body"),f.data("id",b),f.data("url",c),e.close&&f.data("close",e.close),e.param&&f.data("param",e.param),a.fn.bgiframe&&f.bgiframe(),f.find(".dialogHeader").find("h1").html(d),a(f).css("zIndex",a.pdialog._zIndex+=2),a("div.shadow").css("zIndex",a.pdialog._zIndex-3).show(),a.pdialog._init(f,e),a(f).click(function(){a.pdialog.switchDialog(f)}),g.resizable&&f.jresize(),g.drawable&&f.dialogDrag(),a("a.close",f).click(function(b){a.pdialog.close(f);return!1}),g.maxable?a("a.maximize",f).show().click(function(b){a.pdialog.switchDialog(f);a.pdialog.maxsize(f);f.jresize("destroy").dialogDrag("destroy");return!1}):a("a.maximize",f).hide(),a("a.restore",f).click(function(b){a.pdialog.restore(f);f.jresize().dialogDrag();return!1}),g.minable?a("a.minimize",f).show().click(function(b){a.pdialog.minimize(f);return!1}):a("a.minimize",f).hide(),a("div.dialogHeader a",f).mousedown(function(){return!1}),a("div.dialogHeader",f).dblclick(function(){a("a.restore",f).is(":hidden")?a("a.maximize",f).trigger("click"):a("a.restore",f).trigger("click")}),g.max&&(a.pdialog.maxsize(f),f.jresize("destroy").dialogDrag("destroy")),a("body").data(b,f),a.pdialog._current=f,a.pdialog.attachShadow(f),h=a(".dialogContent",f),h.ajaxUrl({type:e.type||"GET",url:c,data:e.data||{},callback:function(){h.find("[layoutH]").layoutH(h);a(".pageContent",f).width(a(f).width()-14);a("button.close").click(function(){a.pdialog.close(f);return!1})}});g.mask?(a(f).css("zIndex",1E3),a("a.minimize",f).hide(),a(f).data("mask",!0),a("#dialogBackground").show()):g.minable&&a.taskBar.addDialog(b,d)},switchDialog:function(c){var b=a(c).css("zIndex");a.pdialog.attachShadow(c);if(a.pdialog._current){var d=a(a.pdialog._current).css("zIndex");a(a.pdialog._current).css("zIndex",b);a(c).css("zIndex",d);a("div.shadow").css("zIndex",d-1);a.pdialog._current=c}a.taskBar.switchTask(c.data("id"))},attachShadow:function(c){var b=a("div.shadow");b.is(":hidden")&&b.show();b.css({top:parseInt(a(c)[0].style.top)-2,left:parseInt(a(c)[0].style.left)-4,height:parseInt(a(c).height())+8,width:parseInt(a(c).width())+8,zIndex:parseInt(a(c).css("zIndex"))-1});a(".shadow_c",b).children().andSelf().each(function(){a(this).css("height",a(c).outerHeight()-4)})},_init:function(c,b){var d=a.extend({},this._op,b),e=d.height>d.minH?d.height:d.minH,d=d.width>d.minW?d.width:d.minW;if(isNaN(c.height())||c.height()<e)a(c).height(e+"px"),a(".dialogContent",c).height(e-a(".dialogHeader",c).outerHeight()-a(".dialogFooter",c).outerHeight()-6);(isNaN(c.css("width"))||c.width()<d)&&a(c).width(d+"px");e=(a(window).height()-c.height())/2;c.css({left:(a(window).width()-c.width())/2,top:0<e?e:0})},initResize:function(c,b,d){a("body").css("cursor",d+"-resize");c.css({top:a(b).css("top"),left:a(b).css("left"),height:a(b).css("height"),width:a(b).css("width")});c.show()},repaint:function(c,b){var d=a("div.shadow");"w"!=c&&"e"!=c&&(d.css("height",d.outerHeight()+b.tmove),a(".shadow_c",d).children().andSelf().each(function(){a(this).css("height",a(this).outerHeight()+b.tmove)}));"n"!=c&&"nw"!=c&&"ne"!=c||d.css("top",b.otop-2);!b.owidth||"n"==c&&"s"==c||d.css("width",b.owidth+8);0<=c.indexOf("w")&&d.css("left",b.oleft-4)},resizeTool:function(c,b,d){a("div[class^\x3d'resizable']",d).filter(function(){return"w"==a(this).attr("tar")||"e"==a(this).attr("tar")}).each(function(){a(this).css("height",a(this).outerHeight()+b)})},resizeDialog:function(c,b,d){var e=parseInt(c.style.left),g=parseInt(c.style.top),f=parseInt(c.style.height);c=parseInt(c.style.width);tmove="n"==d||"nw"==d?parseInt(a(b).css("top"))-g:f-parseInt(a(b).css("height"));a(b).css({left:e,width:c,top:g,height:f});a(".dialogContent",b).css("width",c-12+"px");a(".pageContent",b).css("width",c-14+"px");if("w"!=d&&"e"!=d){var h=a(".dialogContent",b);h.css({height:f-a(".dialogHeader",b).outerHeight()-a(".dialogFooter",b).outerHeight()-6});h.find("[layoutH]").layoutH(h);a.pdialog.resizeTool(d,tmove,b)}a.pdialog.repaint(d,{oleft:e,otop:g,tmove:tmove,owidth:c});a(window).trigger(DWZ.eventType.resizeGrid)},close:function(c){"string"==typeof c&&(c=a("body").data(c));var b=c.data("close");if(b&&a.isFunction(b)){var d=c.data("param");d&&""!=d?(d=DWZ.jsonEval(d),b=b(d)):b=b();if(!b)return}a(c).hide();a("div.shadow").hide();a(c).data("mask")?a("#dialogBackground").hide():a(c).data("id")&&a.taskBar.closeDialog(a(c).data("id"));a("body").removeData(a(c).data("id"));a(c).trigger(DWZ.eventType.pageClear).remove()},closeCurrent:function(){this.close(a.pdialog._current)},checkTimeout:function(){var c=a(".dialogContent",a.pdialog._current);(c=DWZ.jsonEval(c.html()))&&c[DWZ.keys.statusCode]==DWZ.statusCode.timeout&&this.closeCurrent()},maxsize:function(c){a(c).data("original",{top:a(c).css("top"),left:a(c).css("left"),width:a(c).css("width"),height:a(c).css("height")});a("a.maximize",c).hide();a("a.restore",c).show();var b=a(window).width(),d=a(window).height()-34;a(c).css({top:"0px",left:"0px",width:b+"px",height:d+"px"});a.pdialog._resizeContent(c,b,d)},restore:function(c){var b=a(c).data("original"),d=parseInt(b.width),e=parseInt(b.height);a(c).css({top:b.top,left:b.left,width:d,height:e});a.pdialog._resizeContent(c,d,e);a("a.maximize",c).show();a("a.restore",c).hide();a.pdialog.attachShadow(c)},minimize:function(c){a(c).hide();a("div.shadow").hide();var b=a.taskBar.getTask(a(c).data("id"));a(".resizable").css({top:a(c).css("top"),left:a(c).css("left"),height:a(c).css("height"),width:a(c).css("width")}).show().animate({top:a(window).height()-60,left:b.position().left,width:b.outerWidth(),height:b.outerHeight()},250,function(){a(this).hide();a.taskBar.inactive(a(c).data("id"))})},_resizeContent:function(c,b,d){var e=a(".dialogContent",c);e.css({width:b-12+"px",height:d-a(".dialogHeader",c).outerHeight()-a(".dialogFooter",c).outerHeight()-6});e.find("[layoutH]").layoutH(e);a(".pageContent",c).css("width",b-14+"px");a(window).trigger(DWZ.eventType.resizeGrid)}}})(jQuery);(function(a){a.fn.dialogDrag=function(c){return"string"==typeof c&&"destroy"==c?this.each(function(){a("div.dialogHeader",this).unbind("mousedown")}):this.each(function(){var b=a(this);a("div.dialogHeader",b).mousedown(function(c){a.pdialog.switchDialog(b);b.data("task",!0);setTimeout(function(){b.data("task")&&a.dialogDrag.start(b,c)},100);return!1}).mouseup(function(a){b.data("task",!1);return!1})})};a.dialogDrag={currId:null,_init:function(c){this.currId=(new Date).getTime();var b=a("#dialogProxy");b.size()||(b=a(DWZ.frag.dialogProxy),a("body").append(b));a("h1",b).html(a(".dialogHeader h1",c).text())},start:function(c,b){this._init(c);var d=a("#dialogProxy");d.css({left:c.css("left"),top:c.css("top"),height:c.css("height"),width:c.css("width"),zIndex:parseInt(c.css("zIndex"))+1}).show();a("div.dialogContent",d).css("height",a("div.dialogContent",c).css("height"));d.data("dialog",c);c.css({left:"-10000px",top:"-10000px"});a(".shadow").hide();a(d).jDrag({selector:".dialogHeader",stop:this.stop,event:b});return!1},stop:function(c){c=a(c);var b=c.data("dialog");a(b).css({left:a(c).css("left"),top:a(c).css("top")});a.pdialog.attachShadow(b);a(c).hide()}}})(jQuery);(function(a){a.fn.jDrag=function(c){return"string"==typeof c&&"destroy"==c?this.each(function(){a(this).unbind("mousedown",a.rwdrag.start);a.data(this,"pp-rwdrag",null)}):this.each(function(){var b=a(this);a.data(a.rwdrag,"pp-rwdrag",{options:a.extend({el:b,obj:b},c)});c.event?a.rwdrag.start(c.event):a(c.selector,obj).bind("mousedown",a.rwdrag.start)})};a.rwdrag={start:function(c){document.onselectstart=function(a){return!1};var b=a.data(this,"pp-rwdrag"),d=b.options.el[0];a.data(d,"pp-rwdrag",{options:b.options});a.rwdrag.current||(a.rwdrag.current={el:d,oleft:parseInt(d.style.left)||0,otop:parseInt(d.style.top)||0,ox:c.pageX||c.screenX,oy:c.pageY||c.screenY},a(document).bind("mouseup",a.rwdrag.stop).bind("mousemove",a.rwdrag.drag))},drag:function(c){c||(c=window.event);var b=a.rwdrag.current,d=a.data(b.el,"pp-rwdrag"),e=b.oleft+(c.pageX||c.clientX)-b.ox,g=b.otop+(c.pageY||c.clientY)-b.oy;1>g&&(g=0);if("horizontal"==d.options.move)d.options.minW&&e>=a(d.options.obj).cssv("left")+d.options.minW&&d.options.maxW&&e<=a(d.options.obj).cssv("left")+d.options.maxW?b.el.style.left=e+"px":d.options.scop&&(d.options.relObj?e-parseInt(d.options.relObj.style.left)>d.options.cellMinW&&(b.el.style.left=e+"px"):b.el.style.left=e+"px");else if("vertical"==d.options.move)b.el.style.top=g+"px";else{var f=d.options.selector?a(d.options.selector,d.options.obj):a(d.options.obj);e>=2*-f.outerWidth()/3&&0<=g&&e+f.outerWidth()/3<a(window).width()&&g+f.outerHeight()<a(window).height()&&(b.el.style.left=e+"px",b.el.style.top=g+"px")}d.options.drag&&d.options.drag.apply(b.el,[b.el,c]);return a.rwdrag.preventEvent(c)},stop:function(c){var b=a.rwdrag.current,d=a.data(b.el,"pp-rwdrag");a(document).unbind("mousemove",a.rwdrag.drag).unbind("mouseup",a.rwdrag.stop);d.options.stop&&d.options.stop.apply(b.el,[b.el,c]);a.rwdrag.current=null;document.onselectstart=function(a){return!0};return a.rwdrag.preventEvent(c)},preventEvent:function(a){a.stopPropagation&&a.stopPropagation();a.preventDefault&&a.preventDefault();return!1}}})(jQuery);(function(a){a.extend(a.fn,{jBlindUp:function(c){var b=a.extend({duration:500,easing:"swing",call:function(){}},c);return this.each(function(){var c=a(this);a(this).animate({height:0},{step:function(){},duration:b.duration,easing:b.easing,complete:function(){c.css({display:"none"});b.call()}})})},jBlindDown:function(c){var b=a.extend({to:0,duration:500,easing:"swing",call:function(){}},c);return this.each(function(){var c=a(this),e=0<b.to?b.to:a.effect.getDimensions(c[0]).height;c.animate({height:e},{step:function(){},duration:b.duration,easing:b.easing,complete:function(){c.css({display:""});b.call()}})})},jSlideUp:function(c){var b=a.extend({to:0,duration:500,easing:"swing",call:function(){}},c);return this.each(function(){var c=a(this);c.wrapInner("\x3cdiv\x3e\x3c/div\x3e");var e=0<b.to?b.to:a.effect.getDimensions(a("\x3ediv",c)[0]).height;c.css({overflow:"visible",position:"relative"});a("\x3ediv",c).css({position:"relative"}).animate({top:-e},{easing:b.easing,duration:b.duration,complete:function(){c.html(a(this).html())}})})},jSlideDown:function(c){var b=a.extend({to:0,duration:500,easing:"swing",call:function(){}},c);return this.each(function(){var c=a(this),e=0<b.to?b.to:a.effect.getDimensions(c[0]).height;c.wrapInner('\x3cdiv style\x3d"top:-'+e+'px;"\x3e\x3c/div\x3e');c.css({overflow:"visible",position:"relative",height:"0px"}).animate({height:e},{duration:b.duration,easing:b.easing,complete:function(){c.css({display:"",overflow:""});b.call()}});a("\x3ediv",c).css({position:"relative"}).animate({top:0},{easing:b.easing,duration:b.duration,complete:function(){c.html(a(this).html())}})})}});a.effect={getDimensions:function(c,b){var d=new a.effect.Rectangle,e=a(c).css("display"),g=a(c).css("visibility"),f=0==a(c).height()?!0:!1;a(c).is(":hidden")&&(a(c).css({visibility:"hidden",display:"block"}),f&&a(c).css("height",""),a.browser.opera&&refElement.focus());d.height=a(c).outerHeight();d.width=a(c).outerWidth();"none"==e&&(a(c).css({visibility:g,display:"none"}),f&&f&&a(c).css("height","0px"));return d}};a.effect.Rectangle=function(){this.height=this.width=0;this.unit="px"}})(jQuery);(function(a){a.extend({History:{_hash:[],_cont:void 0,_currentHash:"",_callback:void 0,init:function(c,b){a.History._cont=c;a.History._callback=b;var d=location.hash.replace(/\?.*$/,"");a.History._currentHash=d;if(/msie/.test(navigator.userAgent.toLowerCase())){""==a.History._currentHash&&(a.History._currentHash="#");a("body").append('\x3ciframe id\x3d"jQuery_history" style\x3d"display: none;" src\x3d"about:blank"\x3e\x3c/iframe\x3e');var e=a("#jQuery_history")[0],e=e.contentDocument||e.contentWindow.document;e.open();e.close();e.location.hash=d}a.isFunction(this._callback)&&a.History._callback(d.skipChar("#"));setInterval(a.History._historyCheck,100)},_historyCheck:function(){var c;c=/msie/.test(navigator.userAgent.toLowerCase())?a("#jQuery_history")[0].contentWindow.location.hash.skipChar("#").replace(/\?.*$/,""):location.hash.skipChar("#").replace(/\?.*$/,"");c!=a.History._currentHash&&(a.History._currentHash=c,a.History.loadHistory(c))},addHistory:function(c,b,d){a.History._currentHash=c;a.History._hash.push([c,b,d]);/msie/.test(navigator.userAgent.toLowerCase())&&(b=a("#jQuery_history")[0],b=b.contentDocument||b.contentWindow.document,b.open(),b.close(),b.location.hash=c.replace(/\?.*$/,""));location.hash=c.replace(/\?.*$/,"")},loadHistory:function(c){/msie/.test(navigator.userAgent.toLowerCase())&&(location.hash=c);for(var b=0;b<a.History._hash.length;b+=1)if(a.History._hash[b][0]==c){a.History._hash[b][1](a.History._hash[b][2]);break}}}})})(jQuery);var navTab={componentBox:null,_tabBox:null,_prevBut:null,_nextBut:null,_panelBox:null,_moreBut:null,_moreBox:null,_currentIndex:0,_op:{id:"navTab",stTabBox:".navTab-tab",stPanelBox:".navTab-panel",mainTabId:"main",close$:"a.close",prevClass:"tabsLeft",nextClass:"tabsRight",stMore:".tabsMore",stMoreLi:"ul.tabsMoreList"},init:function(a){$.History&&$.History.init("#container");var c=this;$.extend(this._op,a);this.componentBox=$("#"+this._op.id);this._tabBox=this.componentBox.find(this._op.stTabBox);this._panelBox=this.componentBox.find(this._op.stPanelBox);this._prevBut=this.componentBox.find("."+this._op.prevClass);this._nextBut=this.componentBox.find("."+this._op.nextClass);this._moreBut=this.componentBox.find(this._op.stMore);this._moreBox=this.componentBox.find(this._op.stMoreLi);this._prevBut.click(function(a){c._scrollPrev()});this._nextBut.click(function(a){c._scrollNext()});this._moreBut.click(function(){c._moreBox.show();return!1});$(document).click(function(){c._moreBox.hide()});this._contextmenu(this._tabBox);this._contextmenu(this._getTabs());this._init();this._ctrlScrollBut()},_init:function(){var a=this;this._getTabs().each(function(c){$(this).unbind("click").click(function(b){a._switchTab(c)});$(this).find(navTab._op.close$).unbind("click").click(function(){a._closeTab(c)})});this._getMoreLi().each(function(c){$(this).find("\x3ea").unbind("click").click(function(b){a._switchTab(c)})});this._switchTab(this._currentIndex)},_contextmenu:function(a){var c=this;a.contextMenu("navTabCM",{bindings:{reload:function(a,d){c._reload(a,!0)},closeCurrent:function(a,d){var b=a.attr("tabid");b?c.closeTab(b):c.closeCurrentTab()},closeOther:function(a,d){var b=c._indexTabId(a.attr("tabid"));c._closeOtherTab(0<b?b:c._currentIndex)},closeAll:function(a,d){c.closeAllTab()}},ctrSub:function(a,d){var b=d.find("[rel\x3d'reload']"),g=d.find("[rel\x3d'closeCurrent']"),f=d.find("[rel\x3d'closeOther']"),h=d.find("[rel\x3d'closeAll']"),k=c._getTabs();2>k.size()&&(g.addClass("disabled"),f.addClass("disabled"),h.addClass("disabled"));0==c._currentIndex||a.attr("tabid")==c._op.mainTabId?(g.addClass("disabled"),b.addClass("disabled")):2==k.size()&&f.addClass("disabled")}})},_getTabs:function(){return this._tabBox.find("\x3e li")},_getPanels:function(){return this._panelBox.find("\x3e div")},_getMoreLi:function(){return this._moreBox.find("\x3e li")},_getTab:function(a){a=this._indexTabId(a);if(0<=a)return this._getTabs().eq(a)},getPanel:function(a){a=this._indexTabId(a);if(0<=a)return this._getPanels().eq(a)},_getTabsW:function(a,c){return this._tabsW(this._getTabs().slice(a,c))},_tabsW:function(a){var c=0;a.each(function(){c+=$(this).outerWidth(!0)});return c},_indexTabId:function(a){if(!a)return-1;var c=-1;this._getTabs().each(function(b){$(this).attr("tabid")==a&&(c=b)});return c},_getLeft:function(){return this._tabBox.position().left},_getScrollBarW:function(){return this.componentBox.width()-55},_visibleStart:function(){for(var a=this._getLeft(),c=0,b=this._getTabs(),d=0;d<b.size();d++){if(0<=c+a)return d;c+=b.eq(d).outerWidth(!0)}return 0},_visibleEnd:function(){for(var a=this._getLeft(),c=0,b=this._getTabs(),d=0;d<b.size();d++)if(c+=b.eq(d).outerWidth(!0),c+a>this._getScrollBarW())return d;return b.size()},_scrollPrev:function(){var a=this._visibleStart();0<a&&this._scrollTab(-this._getTabsW(0,a-1))},_scrollNext:function(){var a=this._visibleEnd();a<this._getTabs().size()&&this._scrollTab(-this._getTabsW(0,a+1)+this._getScrollBarW())},_scrollTab:function(a,c){var b=this;this._tabBox.animate({left:a+"px"},200,function(){b._ctrlScrollBut()})},_scrollCurrent:function(){var a=this._tabsW(this._getTabs());a<=this._getScrollBarW()?this._scrollTab(0):this._getLeft()<this._getScrollBarW()-a?this._scrollTab(this._getScrollBarW()-a):this._currentIndex<this._visibleStart()?this._scrollTab(-this._getTabsW(0,this._currentIndex)):this._currentIndex>=this._visibleEnd()&&this._scrollTab(this._getScrollBarW()-this._getTabs().eq(this._currentIndex).outerWidth(!0)-this._getTabsW(0,this._currentIndex))},_ctrlScrollBut:function(){var a=this._tabsW(this._getTabs());this._getScrollBarW()>a?(this._prevBut.hide(),this._nextBut.hide(),this._tabBox.parent().removeClass("tabsPageHeaderMargin")):(this._prevBut.show().removeClass("tabsLeftDisabled"),this._nextBut.show().removeClass("tabsRightDisabled"),this._tabBox.parent().addClass("tabsPageHeaderMargin"),0<=this._getLeft()?this._prevBut.addClass("tabsLeftDisabled"):this._getLeft()<=this._getScrollBarW()-a&&this._nextBut.addClass("tabsRightDisabled"))},_switchTab:function(a){var c=this._getTabs().removeClass("selected").eq(a).addClass("selected");"offsets"==DWZ.ui.hideMode?this._getPanels().css({position:"absolute",top:"-100000px",left:"-100000px"}).eq(a).css({position:"",top:"",left:""}):this._getPanels().hide().eq(a).show();this._getMoreLi().removeClass("selected").eq(a).addClass("selected");this._currentIndex=a;this._scrollCurrent();this._reload(c)},_closeTab:function(a,c){this._getTabs().eq(a).remove();this._getPanels().eq(a).trigger(DWZ.eventType.pageClear).remove();this._getMoreLi().eq(a).remove();this._currentIndex>=a&&this._currentIndex--;if(c){var b=this._indexTabId(c);0<b&&(this._currentIndex=b)}this._init();this._scrollCurrent();this._reload(this._getTabs().eq(this._currentIndex))},closeTab:function(a){a=this._indexTabId(a);0<a&&this._closeTab(a)},closeCurrentTab:function(a){0<this._currentIndex&&this._closeTab(this._currentIndex,a)},closeAllTab:function(){this._getTabs().filter(":gt(0)").remove();this._getPanels().filter(":gt(0)").trigger(DWZ.eventType.pageClear).remove();this._getMoreLi().filter(":gt(0)").remove();this._currentIndex=0;this._init();this._scrollCurrent()},_closeOtherTab:function(a){a=a||this._currentIndex;0<a?(a=":eq("+a+")",this._getTabs().not(a).filter(":gt(0)").remove(),this._getPanels().not(a).filter(":gt(0)").trigger(DWZ.eventType.pageClear).remove(),this._getMoreLi().not(a).filter(":gt(0)").remove(),this._currentIndex=1,this._init(),this._scrollCurrent()):this.closeAllTab()},_loadUrlCallback:function(a){a.find("[layoutH]").layoutH();a.find(":button.close").click(function(){navTab.closeCurrentTab()})},_reload:function(a,c){c=c||a.data("reloadFlag");var b=a.attr("url");if(c&&b){a.data("reloadFlag",null);var d=this.getPanel(a.attr("tabid"));if(a.hasClass("external"))navTab.openExternal(b,d);else{var e=$("#pagerForm",d),e=0<e.size()?e.serializeArray():{};d.loadUrl(b,e,function(){navTab._loadUrlCallback(d)})}}},reloadFlag:function(a){var c=this._getTab(a);c&&(this._indexTabId(a)==this._currentIndex?this._reload(c,!0):c.data("reloadFlag",1))},reload:function(a,c){var b=$.extend({data:{},navTabId:"",callback:null},c),d=b.navTabId?this._getTab(b.navTabId):this._getTabs().eq(this._currentIndex),e=b.navTabId?this.getPanel(b.navTabId):this._getPanels().eq(this._currentIndex);e&&(a||(a=d.attr("url")),a&&(d.hasClass("external")?navTab.openExternal(a,e):($.isEmptyObject(b.data)&&(d=$("#pagerForm",e),b.data=0<d.size()?d.serializeArray():{}),e.ajaxUrl({type:"POST",url:a,data:b.data,callback:function(a){navTab._loadUrlCallback(e);$.isFunction(b.callback)&&b.callback(a)}}))))},getCurrentPanel:function(){return this._getPanels().eq(this._currentIndex)},checkTimeout:function(){var a=DWZ.jsonEval(this.getCurrentPanel().html());a&&a[DWZ.keys.statusCode]==DWZ.statusCode.timeout&&this.closeCurrentTab()},openExternal:function(a,c){var b=navTab._panelBox.height();c.html(DWZ.frag.externalFrag.replaceAll("{url}",a).replaceAll("{height}",b+"px"))},openTab:function(a,c,b){b=$.extend({title:"New Tab",type:"GET",data:{},fresh:!0,external:!1},b);var d=this._indexTabId(a);if(0<=d){var e=this._getTabs().eq(d),g=e.attr("tabid")==this._op.mainTabId?"\x3e span \x3e span":"\x3e span";e.find("\x3ea").attr("title",b.title).find(g).html(b.title);var f=this._getPanels().eq(d);if(b.fresh||e.attr("url")!=c)e.attr("url",c),b.external||c.isExternalUrl()?(e.addClass("external"),navTab.openExternal(c,f)):(e.removeClass("external"),f.ajaxUrl({type:b.type,url:c,data:b.data,callback:function(){navTab._loadUrlCallback(f)}}));this._currentIndex=d}else this._tabBox.append('\x3cli tabid\x3d"#tabid#"\x3e\x3ca href\x3d"javascript:" title\x3d"#title#" class\x3d"#tabid#"\x3e\x3cspan\x3e#title#\x3c/span\x3e\x3c/a\x3e\x3ca href\x3d"javascript:;" class\x3d"close"\x3eclose\x3c/a\x3e\x3c/li\x3e'.replaceAll("#tabid#",a).replaceAll("#title#",b.title)),this._panelBox.append('\x3cdiv class\x3d"page unitBox"\x3e\x3c/div\x3e'),this._moreBox.append('\x3cli\x3e\x3ca href\x3d"javascript:" title\x3d"#title#"\x3e#title#\x3c/a\x3e\x3c/li\x3e'.replaceAll("#title#",b.title)),d=this._getTabs(),e=d.filter(":last"),f=this._getPanels().filter(":last"),b.external||c.isExternalUrl()?(e.addClass("external"),navTab.openExternal(c,f)):(e.removeClass("external"),f.ajaxUrl({type:b.type,url:c,data:b.data,callback:function(){navTab._loadUrlCallback(f)}})),$.History&&setTimeout(function(){$.History.addHistory(a,function(a){a=navTab._indexTabId(a);0<=a&&navTab._switchTab(a)},a)},10),this._currentIndex=d.size()-1,this._contextmenu(d.filter(":last").hoverClass("hover"));this._init();this._scrollCurrent();this._getTabs().eq(this._currentIndex).attr("url",c)}};(function(a){a.fn.extend({pagination:function(b){function d(a,b,c,d){a.bind("click",{pageNum:b},function(a){dwzPageBreak({targetType:c,rel:d,data:{pageNum:a.data.pageNum}});a.preventDefault()})}return this.each(function(){for(var e=a(this),g=new c(b),f=g.getInterval(),h="",k=f.start;k<f.end;k++)h+='\x3cli class\x3d"#liClass#"\x3e\x3ca href\x3d"javascript:;"\x3e#pageNum#\x3c/a\x3e\x3c/li\x3e'.replaceAll("#pageNum#",k).replaceAll("#liClass#",k==g.getCurrentPage()?"selected j-num":"j-num");e.html(DWZ.frag.pagination.replaceAll("#pageNumFrag#",h).replaceAll("#currentPage#",g.getCurrentPage())).find("li").hoverClass();var h=e.find("li.j-first"),k=e.find("li.j-prev"),n=e.find("li.j-next"),q=e.find("li.j-last");g.hasPrev()?(h.add(k).find("\x3espan").hide(),d(k,g.getCurrentPage()-1,g.targetType(),g.rel()),d(h,1,g.targetType(),g.rel())):h.add(k).addClass("disabled").find("\x3ea").hide();g.hasNext()?(n.add(q).find("\x3espan").hide(),d(n,g.getCurrentPage()+1,g.targetType(),g.rel()),d(q,g.numPages(),g.targetType(),g.rel())):n.add(q).addClass("disabled").find("\x3ea").hide();e.find("li.j-num\x3ea").each(function(b){d(a(this),b+f.start,g.targetType(),g.rel())});e.find("li.jumpto").each(function(){var b=a(this),c=b.find(":text"),d=b.find(":button");d.click(function(a){(a=c.val())&&a.isPositiveInteger()&&dwzPageBreak({targetType:g.targetType(),rel:g.rel(),data:{pageNum:a}})});c.keyup(function(a){a.keyCode==DWZ.keyCode.ENTER&&d.click()})})})},orderBy:function(b){var c=a.extend({targetType:"navTab",rel:"",asc:"asc",desc:"desc"},b);return this.each(function(){var b=a(this).css({cursor:"pointer"}).click(function(){var a=b.attr("orderField"),d=b.hasClass(c.asc)?c.desc:c.asc;dwzPageBreak({targetType:c.targetType,rel:c.rel,data:{orderField:a,orderDirection:d}})})})},pagerForm:function(b){var c=a.extend({pagerForm$:"#pagerForm",parentBox:document},b);return this.each(function(){var b=a(this),d=a(c.pagerForm$,c.parentBox),f=d.attr("action").replaceAll("#rel#",b.attr("action"));d.attr("action",f);b.find(":input").each(function(){var b=a(this),c=b.attr("name");!c||b.is(":checkbox,:radio")&&!b.is(":checked")||0!=d.find(":input[name\x3d'"+c+"']").length||(b='\x3cinput type\x3d"hidden" name\x3d"#name#" value\x3d"#value#" /\x3e'.replaceAll("#name#",c).replaceAll("#value#",b.val()),d.append(b))})})}});var c=function(b){this.opts=a.extend({targetType:"navTab",rel:"",totalCount:0,numPerPage:10,pageNumShown:10,currentPage:1,callback:function(){return!1}},b)};a.extend(c.prototype,{targetType:function(){return this.opts.targetType},rel:function(){return this.opts.rel},numPages:function(){return Math.ceil(this.opts.totalCount/this.opts.numPerPage)},getInterval:function(){var a=Math.ceil(this.opts.pageNumShown/2),c=this.numPages(),e=c-this.opts.pageNumShown,e=this.getCurrentPage()>a?Math.max(Math.min(this.getCurrentPage()-a,e),0):0,a=this.getCurrentPage()>a?Math.min(this.getCurrentPage()+a,c):Math.min(this.opts.pageNumShown,c);return{start:e+1,end:a+1}},getCurrentPage:function(){var a=parseInt(this.opts.currentPage);return isNaN(a)?1:a},hasPrev:function(){return 1<this.getCurrentPage()},hasNext:function(){return this.getCurrentPage()<this.numPages()}})})(jQuery);(function(a){a.extend(a.fn,{jPanel:function(c){var b=a.extend({header:"panelHeader",headerC:"panelHeaderContent",content:"panelContent",coll:"collapsable",exp:"expandable",footer:"panelFooter",footerC:"panelFooterContent"},c);return this.each(function(){var c=a(this),e=c.hasClass("close"),g=c.hasClass("collapse"),f=a("\x3ediv",c).addClass(b.content),h=a("\x3eh1",c).wrap('\x3cdiv class\x3d"'+b.header+'"\x3e\x3cdiv class\x3d"'+b.headerC+'"\x3e\x3c/div\x3e\x3c/div\x3e');g&&a('\x3ca href\x3d""\x3e\x3c/a\x3e').addClass(e?b.exp:b.coll).insertAfter(h);h=a("\x3ediv:first",c);a('\x3cdiv class\x3d"'+b.footer+'"\x3e\x3cdiv class\x3d"'+b.footerC+'"\x3e\x3c/div\x3e\x3c/div\x3e').appendTo(c);var k=c.attr("defH")?c.attr("defH"):0,n=c.attr("minH")?c.attr("minH"):0;e?f.css({height:"0px",display:"none"}):0<k?f.height(k+"px"):0<n&&f.css("minHeight",n+"px");if(g){var q=a("a",h),l=f.innerHeight()-6,k=0<n&&n>=l?n:l;q.click(function(){q.hasClass(b.exp)?f.jBlindDown({to:k,call:function(){q.removeClass(b.exp).addClass(b.coll);0<n&&f.css("minHeight",n+"px")}}):(0<n&&f.css("minHeight",""),n>=l&&f.css("height",n+"px"),f.jBlindUp({call:function(){q.removeClass(b.coll).addClass(b.exp)}}));return!1})}})}})})(jQuery);(function(a){a.printBox=function(c){c=c?a("#"+c):a("body");var b=a("#printBox");0==b.size()&&(b=a('\x3cdiv id\x3d"printBox"\x3e\x3c/div\x3e').appendTo("body"));b.html(c.html()).find("[layoutH]").height("auto");window.print()}})(jQuery);(function(a){a.validator&&a.extend(a.validator.messages,{required:"\u5fc5\u586b\u5b57\u6bb5",remote:"\u8bf7\u4fee\u6b63\u8be5\u5b57\u6bb5",email:"\u8bf7\u8f93\u5165\u6b63\u786e\u683c\u5f0f\u7684\u7535\u5b50\u90ae\u4ef6",url:"\u8bf7\u8f93\u5165\u5408\u6cd5\u7684\u7f51\u5740",date:"\u8bf7\u8f93\u5165\u5408\u6cd5\u7684\u65e5\u671f",dateISO:"\u8bf7\u8f93\u5165\u5408\u6cd5\u7684\u65e5\u671f (ISO).",number:"\u8bf7\u8f93\u5165\u5408\u6cd5\u7684\u6570\u5b57",digits:"\u53ea\u80fd\u8f93\u5165\u6574\u6570",creditcard:"\u8bf7\u8f93\u5165\u5408\u6cd5\u7684\u4fe1\u7528\u5361\u53f7",equalTo:"\u8bf7\u518d\u6b21\u8f93\u5165\u76f8\u540c\u7684\u503c",accept:"\u8bf7\u8f93\u5165\u62e5\u6709\u5408\u6cd5\u540e\u7f00\u540d\u7684\u5b57\u7b26\u4e32",maxlength:a.validator.format("\u957f\u5ea6\u6700\u591a\u662f {0} \u7684\u5b57\u7b26\u4e32"),minlength:a.validator.format("\u957f\u5ea6\u6700\u5c11\u662f {0} \u7684\u5b57\u7b26\u4e32"),rangelength:a.validator.format("\u957f\u5ea6\u4ecb\u4e8e {0} \u548c {1} \u4e4b\u95f4\u7684\u5b57\u7b26\u4e32"),range:a.validator.format("\u8bf7\u8f93\u5165\u4e00\u4e2a\u4ecb\u4e8e {0} \u548c {1} \u4e4b\u95f4\u7684\u503c"),max:a.validator.format("\u8bf7\u8f93\u5165\u4e00\u4e2a\u6700\u5927\u4e3a {0} \u7684\u503c"),min:a.validator.format("\u8bf7\u8f93\u5165\u4e00\u4e2a\u6700\u5c0f\u4e3a {0} \u7684\u503c"),alphanumeric:"\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u4e0b\u5212\u7ebf",lettersonly:"\u5fc5\u987b\u662f\u5b57\u6bcd",phone:"\u6570\u5b57\u3001\u7a7a\u683c\u3001\u62ec\u53f7"});a.setRegional("datepicker",{dayNames:"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d".split(""),monthNames:"\u4e00\u6708 \u4e8c\u6708 \u4e09\u6708 \u56db\u6708 \u4e94\u6708 \u516d\u6708 \u4e03\u6708 \u516b\u6708 \u4e5d\u6708 \u5341\u6708 \u5341\u4e00\u6708 \u5341\u4e8c\u6708".split(" ")});a.setRegional("alertMsg",{title:{error:"\u9519\u8bef",info:"\u63d0\u793a",warn:"\u8b66\u544a",correct:"\u6210\u529f",confirm:"\u786e\u8ba4\u63d0\u793a"},butMsg:{ok:"\u786e\u5b9a",yes:"\u662f",no:"\u5426",cancel:"\u53d6\u6d88"}})})(jQuery);(function(a){a.fn.extend({jresize:function(c){return"string"==typeof c&&"destroy"==c?this.each(function(){a("div[class^\x3d'resizable']",this).each(function(){a(this).hide()})}):this.each(function(){var b=a(this),c=a(".resizable");a("div[class^\x3d'resizable']",b).each(function(){var d=this;a(d).mousedown(function(e){a.pdialog.switchDialog(b);a.resizeTool.start(c,b,e,a(d).attr("tar"));return!1}).show()})})}});a.resizeTool={start:function(c,b,d,e){a.pdialog.initResize(c,b,e);a.data(c[0],"layer-drag",{options:a.extend(a.pdialog._op,{target:e,dialog:b,stop:a.resizeTool.stop})});a.layerdrag.start(c[0],d,a.pdialog._op)},stop:function(c){var b=a.data(c,"layer-drag");a.pdialog.resizeDialog(c,b.options.dialog,b.options.target);a("body").css("cursor","");a(c).hide()}};a.layerdrag={start:function(c,b,d){a.layerdrag.current||(a.layerdrag.current={el:c,oleft:parseInt(c.style.left)||0,owidth:parseInt(c.style.width)||0,otop:parseInt(c.style.top)||0,oheight:parseInt(c.style.height)||0,ox:b.pageX||b.screenX,oy:b.pageY||b.clientY},a(document).bind("mouseup",a.layerdrag.stop),a(document).bind("mousemove",a.layerdrag.drag));return a.layerdrag.preventEvent(b)},drag:function(c){c||(c=window.event);var b=a.layerdrag.current,d=a.data(b.el,"layer-drag"),e=(c.pageX||c.screenX)-b.ox,g=(c.pageY||c.clientY)-b.oy;if(0>=(c.pageY||c.clientY)||(c.pageY||c.clientY)>=a(window).height()-a(".dialogHeader",a(d.options.dialog)).outerHeight())return!1;var d=d.options.target,f=b.owidth,h=b.oheight;"n"!=d&&"s"!=d&&(f+=0<=d.indexOf("w")?-e:e);f>=a.pdialog._op.minW&&(0<=d.indexOf("w")&&(b.el.style.left=b.oleft+e+"px"),"n"!=d&&"s"!=d&&(b.el.style.width=f+"px"));"w"!=d&&"e"!=d&&(h+=0<=d.indexOf("n")?-g:g);h>=a.pdialog._op.minH&&(0<=d.indexOf("n")&&(b.el.style.top=b.otop+g+"px"),"w"!=d&&"e"!=d&&(b.el.style.height=h+"px"));return a.layerdrag.preventEvent(c)},stop:function(c){var b=a.layerdrag.current,d=a.data(b.el,"layer-drag");a(document).unbind("mousemove",a.layerdrag.drag);a(document).unbind("mouseup",a.layerdrag.stop);d.options.stop&&d.options.stop.apply(b.el,[b.el]);a.layerdrag.current=null;return a.layerdrag.preventEvent(c)},preventEvent:function(a){a.stopPropagation&&a.stopPropagation();a.preventDefault&&a.preventDefault();return!1}}})(jQuery);(function(a){a.fn.extend({getWindowSize:function(){return a.browser.opera?{width:window.innerWidth,height:window.innerHeight}:{width:a(window).width(),height:a(window).height()}},scrollCenter:function(c){var b=a.extend({z:1E6,mode:"WH"},c),d=this.getWindowSize();return this.each(function(){var c=a(this).css({position:"absolute","z-index":b.z}),g=a(document).scrollTop(),f=a(document).scrollLeft(),h=(d.height-c.height())/2+g,k=(d.width-c.width())/2+f;"W"==b.mode?c.appendTo(document.body).css({left:k+"px"}):"H"==b.model?c.appendTo(document.body).css({top:h+"px"}):c.appendTo(document.body).css({top:(d.height-c.height())/2+a(window).scrollTop()+"px",left:k+"px"});a(window).scroll(function(d){c.getWindowSize();d=a(document).scrollTop();var e=a(document).scrollLeft();h+=d-g;k+=e-f;g=d;f=e;"W"==b.mode?c.stop().animate({left:k+"px"}):"H"==b.mode?c.stop().animate({top:h+"px"}):c.stop().animate({top:h+"px",left:k+"px"})});a(window).resize(function(){var d=c.getWindowSize();h=(d.height-c.height())/2+a(document).scrollTop();k=(d.width-c.width())/2+a(document).scrollLeft();"W"==b.mode?c.stop().animate({left:k+"px"}):"H"==b.mode?c.stop().animate({top:h+"px"}):c.stop().animate({top:h+"px",left:k+"px"})})})}})})(jQuery);(function(a){var c={cursor:"move",sortBoxs:"div.sortDrag",replace:!1,items:"\x3e div",selector:"",zIndex:1E3};DWZ.sortDrag={start:function(a,c,e,g){var b=this._createPlaceholder(c),d=c.clone(),k=c.position();d.data("$sortBox",a).data("op",g).data("$item",c).data("$placeholder",b);d.addClass("sortDragHelper").css({position:"absolute",top:k.top+a.scrollTop(),left:k.left,zIndex:g.zIndex,width:c.width()+"px",height:c.height()+"px"}).jDrag({selector:g.selector,drag:this.drag,stop:this.stop,event:e});c.before(b).before(d).hide();return!1},drag:function(b,c){var d=a(b),g=d.data("$sortBox"),f=d.data("$placeholder"),h=g.find(d.data("op").items).filter(":visible").filter(":not(.sortDragPlaceholder, .sortDragHelper)"),k=d.position();h.eq(0).position();var n=DWZ.sortDrag._getOverSortBox(d,c);if(0<n.length&&n[0]!=g[0])f.appendTo(n),d.data("$sortBox",n);else for(d=0;d<h.length;d++)if(g=h.eq(d),n=g.position(),k.top>n.top+10)g.after(f);else if(k.top<=n.top){g.before(f);break}},stop:function(b){var d=a(b);b=d.data("$sortBox");var e=d.data("$item"),g=d.data("$placeholder"),f=a.extend({},c,d.data("op")),h=g.position();d.animate({top:h.top+b.scrollTop()+"px",left:h.left+"px"},{complete:function(){if(d.data("op").replace){var a=e.parents(f.sortBoxs+":first"),b=g.parents(f.sortBoxs+":first");a[0]!=b[0]&&(a=g.next(),0<a.size()&&a.insertAfter(e))}e.insertAfter(g).show();g.remove();d.remove()},duration:300})},_createPlaceholder:function(b){return a("\x3c"+b[0].nodeName+' class\x3d"sortDragPlaceholder"/\x3e').css({width:b.outerWidth()+"px",height:b.outerHeight()+"px",marginTop:b.css("marginTop"),marginRight:b.css("marginRight"),marginBottom:b.css("marginBottom"),marginLeft:b.css("marginLeft")})},_getOverSortBox:function(b,d){var e=b.position(),g=e.top+b.height()/2,f=e.left+b.width()/2,e=a.extend({},c,b.data("op"));return a(e.sortBoxs).filter(":visible").filter(function(){var b=a(this),c=b.position(),d=b.height(),b=b.width();return DWZ.isOver(g,f,c.top,c.left,d,b)})}};a.fn.sortDrag=function(b){return this.each(function(){var d=a.extend({},c,b),e=a(this);e.attr("selector")&&(d.selector=e.attr("selector"));e.find(d.items).each(function(b){var c=a(this);b=c;d.selector&&(b=c.find(d.selector).css({cursor:d.cursor}));d.refresh&&b.unbind("mousedown");b.mousedown(function(a){DWZ.sortDrag.start(e,c,a,d);a.preventDefault()})});e.find(".close").mousedown(function(b){a(this).parent().remove();return!1})})}})(jQuery);(function(a){a.fn.jTable=function(c){return this.each(function(){for(var b=a(this),d=b.attr("nowrapTD"),e=b.width(),g=[],f=b.parent().addClass("j-resizeGrid"),h=a(this).attr("layoutH"),k=b.find("thead\x3etr:last-child").find("th"),n=0,q=k.size();n<q;n++){var l=a(k[n]),v=[],w=l.innerWidth()-100*l.innerWidth()/e-2;v[0]=parseInt(w);v[1]=l.attr("align");g[g.length]=v}a(this).wrap("\x3cdiv class\x3d'grid'\x3e\x3c/div\x3e");var r=b.parent().html(b.html()),t=r.find("thead");t.wrap("\x3cdiv class\x3d'gridHeader'\x3e\x3cdiv class\x3d'gridThead'\x3e\x3ctable style\x3d'width:"+(e-20)+"px;'\x3e\x3c/table\x3e\x3c/div\x3e\x3c/div\x3e");k=a("\x3etr:last-child",t);k=a("\x3eth",k);a("th",t).each(function(){var b=a(this);b.html("\x3cdiv class\x3d'gridCol' title\x3d'"+b.text()+"'\x3e"+b.html()+"\x3c/div\x3e")});k.each(function(b){var c=a(this);b=g[b];c.addClass(b[1]).hoverClass("hover").removeAttr("align").removeAttr("width").width(b[0])}).filter("[orderField]").orderBy({targetType:b.attr("targetType"),rel:b.attr("rel"),asc:b.attr("asc")||"asc",desc:b.attr("desc")||"desc"});var m=r.find("\x3etbody");m.wrap("\x3cdiv class\x3d'gridScroller'"+(h?" layoutH\x3d'"+h+"'":"")+" style\x3d'width:"+f.width()+"px;'\x3e\x3cdiv class\x3d'gridTbody'\x3e\x3ctable style\x3d'width:"+(e-20)+"px;'\x3e\x3c/table\x3e\x3c/div\x3e\x3c/div\x3e");var x=a("\x3etr:first-child",m),p=m.find("\x3etr");p.hoverClass().each(function(){for(var b=a(this),c=a("\x3etd",this),e=0;e<c.size();e++){var f=a(c[e]);"false"!=d&&f.html("\x3cdiv\x3e"+f.html()+"\x3c/div\x3e");e<g.length&&f.addClass(g[e][1])}b.click(function(){p.filter(".selected").removeClass("selected");b.addClass("selected");var c=b.attr("target");c&&(0==a("#"+c,r).size()&&r.prepend('\x3cinput id\x3d"'+c+'" type\x3d"hidden" /\x3e'),a("#"+c,r).val(b.attr("rel")))})});a("\x3etd",x).each(function(b){b<g.length&&a(this).width(g[b][0])});r.append("\x3cdiv class\x3d'resizeMarker' style\x3d'height:300px; left:57px;display:none;'\x3e\x3c/div\x3e\x3cdiv class\x3d'resizeProxy' style\x3d'height:300px; left:377px;display:none;'\x3e\x3c/div\x3e");var u=a(".gridScroller",r);u.scroll(function(b){b=a(".gridThead",r);if(0<u.scrollLeft()){b.css("position","relative");var c=u.scrollLeft();b.css("left",u.cssv("left")-c)}0==u.scrollLeft()&&(b.css("position","relative"),b.css("left","0px"));return!1});a("\x3etr",t).each(function(){a("\x3eth",this).each(function(b){var d=this,e=a(this);e.mouseover(function(b){b=a.jTableTool.getOffset(d,b).offsetX;5>e.outerWidth()-b?e.css("cursor","col-resize").mousedown(function(b){a(".resizeProxy",r).show().css({left:a.jTableTool.getRight(d)-a(".gridScroller",r).scrollLeft(),top:a.jTableTool.getTop(d),height:a.jTableTool.getHeight(d,r),cursor:"col-resize"});a(".resizeMarker",r).show().css({left:a.jTableTool.getLeft(d)+1-a(".gridScroller",r).scrollLeft(),top:a.jTableTool.getTop(d),height:a.jTableTool.getHeight(d,r)});a(".resizeProxy",r).jDrag(a.extend(c,{scop:!0,cellMinW:20,relObj:a(".resizeMarker",r)[0],move:"horizontal",event:b,stop:function(){var b=a(".resizeProxy",r).position().left,c=a(".resizeMarker",r).position().left,c=b-c-e.outerWidth()-9;a.jTableTool.getColspan(e);var d=a.jTableTool.getCellNum(e),b=e.width(),c=e.width()+c,d=a("\x3etd",x).eq(d-1);e.width(c+"px");d.width(c+"px");d=a(t).parent();d.width(d.width()-b+c+"px");d=a(m).parent();d.width(d.width()-b+c+"px");a(".resizeMarker,.resizeProxy",r).hide()}}))}):(e.css("cursor",e.attr("orderField")?"pointer":"default"),e.unbind("mousedown"));return!1})})});a(window).unbind(DWZ.eventType.resizeGrid).bind("resizeGrid",function(){a("div.j-resizeGrid").each(function(){var b=a(this).innerWidth();b&&a("div.gridScroller",this).width(b+"px")})})})};a.jTableTool={getLeft:function(c){var b=0;a(c).prevAll().each(function(){b+=a(this).outerWidth()});return b-1},getRight:function(c){var b=0;a(c).prevAll().andSelf().each(function(){b+=a(this).outerWidth()});return b-1},getTop:function(c){var b=0;a(c).parent().prevAll().each(function(){b+=a(this).outerHeight()});return b},getHeight:function(c,b){var d=0;a(c).parent().nextAll().andSelf().each(function(){d+=a(this).outerHeight()});a(".gridTbody",b).children().each(function(){d+=a(this).outerHeight()});return d},getCellNum:function(c){return a(c).prevAll().andSelf().size()},getColspan:function(c){return a(c).attr("colspan")||1},getStart:function(c){var b=1;a(c).prevAll().each(function(){b+=parseInt(a(this).attr("colspan")||1)});return b},getPageCoord:function(a){for(var b={x:0,y:0};a;)b.x+=a.offsetLeft,b.y+=a.offsetTop,a=a.offsetParent;return b},getOffset:function(c,b){if(/msie/.test(navigator.userAgent.toLowerCase())){var d=a(c).offset();return d={offsetX:(b.pageX||b.screenX)-d.left,offsetY:(b.pageY||b.screenY)-d.top}}d=b.target;void 0==d.offsetLeft&&(d=d.parentNode);d=a.jTableTool.getPageCoord(d);return d={offsetX:window.pageXOffset+b.clientX-d.x,offsetY:window.pageYOffset+b.clientY-d.y}}}})(jQuery);(function(a){function c(c){c.removeClass("selected");a(document).unbind("click",b)}function b(a){c(a.data.box)}a.fn.navMenu=function(){return this.each(function(){var b=a(this);b.find("li\x3ea").click(function(){var c=a(this);a.post(c.attr("href"),{},function(d){a("#sidebar").find(".accordion").remove().end().append(d).initUI();b.find("li").removeClass("selected");c.parent().addClass("selected");navTab.closeAllTab()});return!1})})};a.fn.switchEnv=function(){return this.each(function(){var d=a(this);d.click(function(){d.hasClass("selected")?c(d):(d.addClass("selected"),a(document).bind("click",{box:d},b));return!1});d.find("\x3eul\x3eli").click(function(){var b=a(this);a.post(b.find("\x3ea").attr("href"),{},function(e){c(d);d.find("\x3ea\x3espan").html(b.find("\x3ea").html());navTab.closeAllTab();a("#sidebar").find(".accordion").remove().end().append(e).initUI()});return!1})})}})(jQuery);(function(a){a.fn.extend({tabs:function(c){function b(c){var f=c.add(a("\x3e *",c)),g=a(e.stTabHeader,f),k=a(e.stTab+" li",g),n=a(e.stTabPanel+" \x3e *",f);k.unbind().find("a").unbind();g.find("."+e.prevClass).unbind();g.find("."+e.nextClass).unbind();k.each(function(f){e.currentIndex==f?a(this).addClass("selected"):a(this).removeClass("selected");"hover"==e.eventType?a(this).hover(function(a){d(c,f)}):a(this).click(function(a){d(c,f)});a("a",this).each(function(){a(this).hasClass(e.ajaxClass)?a(this).click(function(a){var b=n.eq(f);this.href&&!b.attr("loaded")&&b.loadUrl(this.href,{},function(){b.find("[layoutH]").layoutH();b.attr("loaded",!0)});a.preventDefault()}):a(this).hasClass(e.closeClass)&&a(this).click(function(a){k.eq(f).remove();n.eq(f).remove();f==e.currentIndex?e.currentIndex=f+1<k.size()?f:f-1:f<e.currentIndex&&(e.currentIndex=f);b(c);return!1})})});d(c,e.currentIndex)}function d(b,c){var d=b.add(a("\x3e *",b)),f=a(e.stTabHeader,d),f=a(e.stTab+" li",f),d=a(e.stTabPanel+" \x3e *",d),g=f.eq(c),q=d.eq(c);e.reverse&&g.hasClass("selected")?(f.removeClass("selected"),d.hide()):(e.currentIndex=c,f.removeClass("selected"),g.addClass("selected"),d.hide().eq(e.currentIndex).show());q.attr("inited")||q.attr("inited",1E3).find("input[type\x3dtext]").filter("[alt]").inputAlert()}var e=a.extend({reverse:!1,eventType:"click",currentIndex:0,stTabHeader:"\x3e .tabsHeader",stTab:"\x3e.tabsHeaderContent\x3eul",stTabPanel:"\x3e .tabsContent",ajaxClass:"j-ajax",closeClass:"close",prevClass:"tabsLeft",nextClass:"tabsRight"},c);return this.each(function(){b(a(this))})}})})(jQuery);(function(a){a.fn.extend({jTask:function(c){return this.each(function(){var b=a(this),c=b.attr("id");b.click(function(d){d=a("body").data(c);b.hasClass("selected")?a("a.minimize",d).trigger("click"):d.is(":hidden")?a.taskBar.restoreDialog(d):a(d).trigger("click");a.taskBar.scrollCurrent(a(this));return!1});a("div.close",b).click(function(b){a.pdialog.close(c);return!1}).hoverClass("closeHover");b.hoverClass("hover")})}});a.taskBar={_taskBar:null,_taskBox:null,_prevBut:null,_nextBut:null,_op:{id:"taskbar",taskBox:"div.taskbarContent",prevBut:".taskbarLeft",prevDis:"taskbarLeftDisabled",nextBut:".taskbarRight",nextDis:"taskbarRightDisabled",selected:"selected",boxMargin:"taskbarMargin"},init:function(c){var b=this;a.extend(this._op,c);this._taskBar=a("#"+this._op.id);0==this._taskBar.size()&&(this._taskBar=a(DWZ.frag.taskbar).appendTo(a("#layout")),this._taskBar.find(".taskbarLeft").hoverClass("taskbarLeftHover"),this._taskBar.find(".taskbarRight").hoverClass("taskbarRightHover"));this._taskBox=this._taskBar.find(this._op.taskBox);this._taskList=this._taskBox.find("\x3eul");this._prevBut=this._taskBar.find(this._op.prevBut);this._nextBut=this._taskBar.find(this._op.nextBut);this._prevBut.click(function(a){b.scrollLeft()});this._nextBut.click(function(a){b.scrollRight()});this._contextmenu(this._taskBox)},_contextmenu:function(c){a(c).contextMenu("dialogCM",{bindings:{closeCurrent:function(b,c){var d=b.isTag("li")?b:a.taskBar._getCurrent();a("div.close",d).trigger("click")},closeOther:function(b,c){var d=b.isTag("li")?"#"+b.attr("id"):".selected",g=a.taskBar._taskList.find("\x3eli:not(:"+d+")");g.each(function(b){a("div.close",g[b]).trigger("click")})},closeAll:function(b,c){var d=a.taskBar._getTasks();d.each(function(b){a("div.close",d[b]).trigger("click")})}},ctrSub:function(b,c){var d=c.find("[rel\x3d'closeCurrent']"),g=c.find("[rel\x3d'closeOther']");a.taskBar._getCurrent()[0]?1==a.taskBar._getTasks().size()&&g.addClass("disabled"):(d.addClass("disabled"),g.addClass("disabled"))}})},_scrollCurrent:function(){if(this._tasksW(this._getTasks())>this._getTaskBarW()){var c=this,b=a("\x3eli:last-child",this._taskList),b=this._getTaskBarW()-b.position().left-b.outerWidth(!0);this._taskList.animate({left:b+"px"},200,function(){c._ctrlScrollBut()})}else this._ctrlScrollBut()},_getTaskBarW:function(){return this._taskBox.width()-(this._prevBut.is(":hidden")?this._prevBut.width()+2:0)-(this._nextBut.is(":hidden")?this._nextBut.width()+2:0)},_scrollTask:function(a){var b=this;a.position().left+this._getLeft()+a.outerWidth()>this._getBarWidth()?(a=this._getTaskBarW()-a.position().left-a.outerWidth(!0)-2,this._taskList.animate({left:a+"px"},200,function(){b._ctrlScrollBut()})):0>a.position().left+this._getLeft()&&(a=this._getLeft()-(a.position().left+this._getLeft()),this._taskList.animate({left:a+"px"},200,function(){b._ctrlScrollBut()}))},_ctrlScrollBut:function(){var a=this._tasksW(this._getTasks());this._getTaskBarW()>a?(this._taskBox.removeClass(this._op.boxMargin),this._nextBut.hide(),this._prevBut.hide(),this._getTasks().eq(0)[0]&&this._scrollTask(this._getTasks().eq(0))):(this._taskBox.addClass(this._op.boxMargin),this._nextBut.show().removeClass(this._op.nextDis),this._prevBut.show().removeClass(this._op.prevDis),0<=this._getLeft()&&this._prevBut.addClass(this._op.prevDis),this._getLeft()<=this._getTaskBarW()-a&&this._nextBut.addClass(this._op.nextDis))},_getLeft:function(){return this._taskList.position().left},_visibleStart:function(){for(var a=this._getLeft(),b=this._getTasks(),d=0;d<b.size();d++)if(0<=b.eq(d).position().left+b.eq(d).outerWidth(!0)+a)return b.eq(d);return b.eq(0)},_visibleEnd:function(){for(var a=this._getLeft(),b=this._getTasks(),d=0;d<b.size();d++)if(b.eq(d).position().left+b.eq(d).outerWidth(!0)+a>this._getBarWidth())return b.eq(d);return b.eq(b.size()-1)},_getTasks:function(){return this._taskList.find("\x3eli")},_tasksW:function(c){var b=0;c.each(function(){b+=a(this).outerWidth(!0)});return b},_getBarWidth:function(){return this._taskBar.innerWidth()},addDialog:function(c,b){this.show();var d=a("#"+c,this._taskList);d[0]?a("\x3ediv\x3espan",d).text(b):(this._taskList.append('\x3cli id\x3d"#taskid#"\x3e\x3cdiv class\x3d"taskbutton"\x3e\x3cspan\x3e#title#\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"close"\x3eClose\x3c/div\x3e\x3c/li\x3e'.replace("#taskid#",c).replace("#title#",b)),d=a("#"+c,this._taskList),d.jTask());this._contextmenu(d);this.switchTask(c);this._scrollTask(d)},closeDialog:function(c){("string"==typeof c?a("#"+c,this._taskList):c).remove();0==this._getTasks().size()&&this.hide();this._scrollCurrent()},restoreDialog:function(c){var b="string"==typeof c?a("body").data(c):c;c="string"==typeof c?c:b.data("id");var d=a.taskBar.getTask(c);a(".resizable").css({top:a(window).height()-60,left:a(d).position().left,height:a(d).outerHeight(),width:a(d).outerWidth()}).show().animate({top:a(b).css("top"),left:a(b).css("left"),width:a(b).css("width"),height:a(b).css("height")},250,function(){a(this).hide();a(b).show();a.pdialog.attachShadow(b)});a.taskBar.switchTask(c)},inactive:function(c){a("#"+c,this._taskList).removeClass("selected")},scrollLeft:function(){var a=this._visibleStart();this._scrollTask(a)},scrollRight:function(){var a=this._visibleEnd();this._scrollTask(a)},scrollCurrent:function(a){this._scrollTask(a)},switchTask:function(a){this._getCurrent().removeClass("selected");this.getTask(a).addClass("selected")},_getCurrent:function(){return this._taskList.find("\x3e.selected")},getTask:function(c){return a("#"+c,this._taskList)},show:function(){this._taskBar.is(":hidden")&&(this._taskBar.css("top",a(window).height()-34+this._taskBar.outerHeight()).show(),this._taskBar.animate({top:a(window).height()-this._taskBar.outerHeight()},500))},hide:function(){this._taskBar.animate({top:a(window).height()-29+this._taskBar.outerHeight(!0)},500,function(){a.taskBar._taskBar.hide()})}}})(jQuery);(function(a){a.fn.extend({theme:function(c){var b=a.extend({themeBase:"themes"},c).themeBase+"/#theme#/style.css";return this.each(function(){var c=a(this).find("\x3eli[theme]"),e=function(d){a("head").find("link[href$\x3d'style.css']").attr("href",b.replace("#theme#",d));c.find("\x3ediv").removeClass("selected");c.filter("[theme\x3d"+d+"]").find("\x3ediv").addClass("selected");a.isFunction(a.cookie)&&a.cookie("dwz_theme",d)};c.each(function(b){b=a(this);var c=b.attr("theme");b.addClass(c).click(function(){e(c)})});if(a.isFunction(a.cookie)){var g=a.cookie("dwz_theme");g&&e(g)}})}})})(jQuery);(function(a){a.extend(a.fn,{jTree:function(c){var b=a.extend({checkFn:null,selected:"selected",exp:"expandable",coll:"collapsable",firstExp:"first_expandable",firstColl:"first_collapsable",lastExp:"last_expandable",lastColl:"last_collapsable",folderExp:"folder_expandable",folderColl:"folder_collapsable",endExp:"end_expandable",endColl:"end_collapsable",file:"file",ck:"checked",unck:"unchecked"},c);return this.each(function(){var c=a(this),e=c.children().length;a("\x3eli",c).each(function(){var d=a(this),f=d.prev()[0]?!1:!0,h=d.next()[0]?!1:!0;d.genTree({icon:c.hasClass("treeFolder"),ckbox:c.hasClass("treeCheck"),options:b,level:0,exp:1<e?f?b.firstExp:h?b.lastExp:b.exp:b.endExp,coll:1<e?f?b.firstColl:h?b.lastColl:b.coll:b.endColl,showSub:!c.hasClass("collapse")&&(c.hasClass("expand")||(1<e?f?!0:!1:!0)),isLast:1<e?h?!0:!1:!0})});setTimeout(function(){if(c.hasClass("treeCheck")){var d=eval(c.attr("oncheck"));d&&a.isFunction(d)&&a("div.ckbox",c).each(function(){var b=a(this);b.click(function(){var c=a(b).hasClass("checked"),e=[];if(c){var f=a(b).parent().parent(),f=a("input",f);1<f.size()?a(f).each(function(){e[e.length]={name:a(this).attr("name"),value:a(this).val(),text:a(this).attr("text")}}):e={name:f.attr("name"),value:f.val(),text:f.attr("text")}}d({checked:c,items:e})})})}a("a",c).click(function(d){a("div."+b.selected,c).removeClass(b.selected);var e=a(this).parent().addClass(b.selected),f=a(this).parents("li:first"),g=f.attr("target");g&&(0==a("#"+g,c).size()&&c.prepend('\x3cinput id\x3d"'+g+'" type\x3d"hidden" /\x3e'),a("#"+g,c).val(f.attr("rel")));a(".ckbox",e).trigger("click");d.stopPropagation();a(document).trigger("click");if(!a(this).attr("target"))return!1})},1)})},subTree:function(c,b){return this.each(function(){a("\x3eli",this).each(function(){var d=a(this),e=d.next()[0]?!1:!0;d.genTree({icon:c.icon,ckbox:c.ckbox,exp:e?c.options.lastExp:c.options.exp,coll:e?c.options.lastColl:c.options.coll,options:c.options,level:b,space:e?null:c.space,showSub:c.showSub,isLast:e})})})},genTree:function(c){function b(b,c){if(0<b){var d=c.parent().parent(),e="\x3cdiv class\x3d'"+(d.next()[0]?"line":"indent")+"'\x3e\x3c/div\x3e";if(1<b){for(var d=a("\x3ediv\x3ediv",d).filter(":first"),g="";1<b;)g=g+"\x3cdiv class\x3d'"+d.attr("class")+"'\x3e\x3c/div\x3e",d=d.next(),b--;e=g+e}a("\x3ediv",c).prepend(e)}}var d=a.extend({icon:c.icon,ckbox:c.ckbox,exp:"",coll:"",showSub:!1,level:0,options:null,isLast:!1},c);return this.each(function(){var c=a(this),g=a("\x3eul",c),f=c.parent().prev(),h="unchecked";d.ckbox&&0<a("\x3e.checked",f).size()&&(h="checked");0<g.size()?(c.children(":first").wrap("\x3cdiv\x3e\x3c/div\x3e"),a("\x3ediv",c).prepend("\x3cdiv class\x3d'"+(d.showSub?d.coll:d.exp)+"'\x3e\x3c/div\x3e"+(d.ckbox?"\x3cdiv class\x3d'ckbox "+h+"'\x3e\x3c/div\x3e":"")+(d.icon?"\x3cdiv class\x3d'"+(d.showSub?d.options.folderColl:d.options.folderExp)+"'\x3e\x3c/div\x3e":"")),d.showSub?g.show():g.hide(),a("\x3ediv\x3ediv:first,\x3ediv\x3ea",c).click(function(){a("\x3eli:first",g).children(":first").isTag("a")&&g.subTree(d,d.level+1);var b=a(this),e=b.isTag("a"),b=e?a("\x3ediv\x3ediv",c).eq(d.level):b;if(!e||g.is(":hidden"))b.toggleClass(d.exp).toggleClass(d.coll),d.icon&&a("\x3ediv\x3ediv:last",c).toggleClass(d.options.folderExp).toggleClass(d.options.folderColl);g.is(":hidden")?g.slideDown("fast"):e?"":g.slideUp("fast");return!1}),b(d.level,c),d.showSub&&g.subTree(d,d.level+1)):(c.children().wrap("\x3cdiv\x3e\x3c/div\x3e"),a("\x3ediv",c).prepend("\x3cdiv class\x3d'node'\x3e\x3c/div\x3e"+(d.ckbox?"\x3cdiv class\x3d'ckbox "+h+"'\x3e\x3c/div\x3e":"")+(d.icon?"\x3cdiv class\x3d'file'\x3e\x3c/div\x3e":"")),b(d.level,c),d.isLast&&a(c).addClass("last"));d.ckbox&&c._check(d);a("\x3ediv",c).mouseover(function(){a(this).addClass("hover")}).mouseout(function(){a(this).removeClass("hover")});/msie/.test(navigator.userAgent.toLowerCase())&&a("\x3ediv",c).click(function(){a("a",this).trigger("click");return!1})})},_check:function(c){var b=a(this),d=a("\x3ediv\x3e.ckbox",b);c=b.find("a");var e=c.attr("tname"),g=c.attr("tvalue"),f="text\x3d'"+c.text()+"' ";e&&(f+="name\x3d'"+e+"' ");g&&(f+="value\x3d'"+g+"' ");d.append("\x3cinput type\x3d'checkbox' style\x3d'display:none;' "+f+"/\x3e").click(function(){var c=d.hasClass("checked"),e=c?"unchecked":"checked",f=c?"checked":"unchecked";d.removeClass(f).removeClass(c?"":"indeterminate").addClass(e);a("input",d).attr("checked",!c);a("\x3eul",b).find("li").each(function(){a("div.ckbox",this).removeClass(f).removeClass(c?"":"indeterminate").addClass(e).find("input").attr("checked",!c)});a(b)._checkParent();return!1});c.attr("checked")&&(d.find("input").attr("checked",!0),d.removeClass("unchecked").addClass("checked"),a(b)._checkParent())},_checkParent:function(){if(!a(this).parent().hasClass("tree")){var c=a(this).parent().parent(),b=a("\x3eul",c),d=b.find("\x3eli\x3ea").size()+b.find("div.ckbox").size(),e=b.find("div.checked").size(),b=e==d?"checked":0!=e?"indeterminate":"unchecked",d=e==d?"indeterminate":0!=e?"checked":"indeterminate";a("\x3ediv\x3e.ckbox",c).removeClass("unchecked").removeClass("checked").removeClass(d).addClass(b);d=a(":checkbox",c);"checked"==b?d.attr("checked","checked"):"unchecked"==b&&d.removeAttr("checked");c._checkParent()}}})})(jQuery);function initEnv(){$("body").append(DWZ.frag.dwzFrag);$(window).resize(function(){initLayout();$(this).trigger(DWZ.eventType.resizeGrid)});var a=$("#background,#progressBar");a.hide();$(document).ajaxStart(function(){a.show()}).ajaxStop(function(){a.hide()});$.fn.jBar&&$("#leftside").jBar({minW:150,maxW:700});$.taskBar&&$.taskBar.init();window.navTab&&navTab.init();$.fn.switchEnv&&$("#switchEnvBox").switchEnv();$.fn.navMenu&&$("#navMenu").navMenu();setTimeout(function(){initLayout();DWZ.regPlugins.push(initUI);$(document).initUI();var a=$("div.tabsPageHeader");a.find(".tabsLeft").hoverClass("tabsLeftHover");a.find(".tabsRight").hoverClass("tabsRightHover");a.find(".tabsMore").hoverClass("tabsMoreHover")},10)}function initLayout(){var a=$(window).width()-(DWZ.ui.sbar?$("#sidebar").width()+10:34)-5,c=$(window).height()-$("#header").height()-34;$("#container").width(a);$("#container .tabsPageContent").height(c-34).find("[layoutH]").layoutH();$("#sidebar, #sidebar_s .collapse, #splitBar, #splitBarProxy").height(c-5);$("#taskbar").css({top:c+$("#header").height()+5,width:$(window).width()})}function initUI(a){$.fn.jTable&&$("table.table",a).jTable();$.fn.cssTable&&$("table.list",a).cssTable();$.fn.jPanel&&$("div.panel",a).jPanel();$("div.tabs",a).each(function(){var a=$(this),b={};b.currentIndex=a.attr("currentIndex")||0;b.eventType=a.attr("eventType")||"click";a.tabs(b)});$.fn.jTree&&$("ul.tree",a).jTree();$.fn.jTree&&$("div.accordion",a).each(function(){var a=$(this);a.accordion({fillSpace:a.attr("fillSpace"),alwaysOpen:!0,active:0})});$.fn.checkboxCtrl&&$(":button.checkboxCtrl, :checkbox.checkboxCtrl",a).checkboxCtrl(a);$.fn.combox&&$("select.combox",a).combox();$.fn.xheditor&&$("textarea.editor",a).each(function(){var a=$(this),b={html5Upload:!1,skin:"vista",tools:a.attr("tools")||"full"},d=[["upLinkUrl","upLinkExt","zip,rar,txt"],["upImgUrl","upImgExt","jpg,jpeg,gif,png"],["upFlashUrl","upFlashExt","swf"],["upMediaUrl","upMediaExt","avi"]];$(d).each(function(c){var e=d[c][0],f=d[c][1];a.attr(e)&&(b[e]=a.attr(e),b[f]=a.attr(f)||d[c][2])});a.xheditor(b)});$.fn.uploadify&&$(":file[uploaderOption]",a).each(function(){var a=$(this),b={fileObjName:a.attr("name")||"file",auto:!0,multi:!0,onUploadError:uploadifyError},d=DWZ.jsonEval(a.attr("uploaderOption"));$.extend(b,d);DWZ.debug("uploaderOption: "+DWZ.obj2str(d));a.uploadify(b)});$("input[type\x3dtext], input[type\x3dpassword], textarea",a).addClass("textInput").focusClass("focus");$("input[readonly], textarea[readonly]",a).addClass("readonly");$("input[disabled\x3dtrue], textarea[disabled\x3dtrue]",a).addClass("disabled");$("input[type\x3dtext]",a).not("div.tabs input[type\x3dtext]",a).filter("[alt]").inputAlert();$("div.panelBar li, div.panelBar",a).hoverClass("hover");$("div.button",a).hoverClass("buttonHover");$("div.buttonActive",a).hoverClass("buttonActiveHover");$("div.tabsHeader li, div.tabsPageHeader li, div.accordionHeader, div.accordion",a).hoverClass("hover");$.fn.validate&&$("form.required-validate",a).each(function(){var a=$(this);a.validate({onsubmit:!1,focusInvalid:!1,focusCleanup:!0,errorElement:"span",ignore:".ignore",invalidHandler:function(a,c){var b=c.numberOfInvalids();b&&(b=DWZ.msg("validateFormError",[b]),alertMsg.error(b))}});a.find("input[customvalid]").each(function(){var a=$(this);a.rules("add",{customvalid:a.attr("customvalid")})})});$.fn.datepicker&&$("input.date",a).each(function(){var a=$(this),b={};a.attr("dateFmt")&&(b.pattern=a.attr("dateFmt"));a.attr("minDate")&&(b.minDate=a.attr("minDate"));a.attr("maxDate")&&(b.maxDate=a.attr("maxDate"));a.attr("mmStep")&&(b.mmStep=a.attr("mmStep"));a.attr("ssStep")&&(b.ssStep=a.attr("ssStep"));a.datepicker(b)});$("a[target\x3dnavTab]",a).each(function(){$(this).click(function(a){var b=$(this),c=b.attr("title")||b.text(),e=b.attr("rel")||"_blank",g=eval(b.attr("fresh")||"true"),f=eval(b.attr("external")||"false"),h=unescape(b.attr("href")).replaceTmById($(a.target).parents(".unitBox:first"));DWZ.debug(h);if(!h.isFinishedTm())return alertMsg.error(b.attr("warn")||DWZ.msg("alertSelectMsg")),!1;navTab.openTab(e,h,{title:c,fresh:g,external:f});a.preventDefault()})});$("a[target\x3ddialog]",a).each(function(){$(this).click(function(a){var b=$(this),c=b.attr("title")||b.text(),e=b.attr("rel")||"_blank",g={},f=b.attr("width"),h=b.attr("height");f&&(g.width=f);h&&(g.height=h);g.max=eval(b.attr("max")||"false");g.mask=eval(b.attr("mask")||"false");g.maxable=eval(b.attr("maxable")||"true");g.minable=eval(b.attr("minable")||"true");g.fresh=eval(b.attr("fresh")||"true");g.resizable=eval(b.attr("resizable")||"true");g.drawable=eval(b.attr("drawable")||"true");g.close=eval(b.attr("close")||"");g.param=b.attr("param")||"";a=unescape(b.attr("href")).replaceTmById($(a.target).parents(".unitBox:first"));DWZ.debug(a);if(!a.isFinishedTm())return alertMsg.error(b.attr("warn")||DWZ.msg("alertSelectMsg")),!1;$.pdialog.open(a,e,c,g);return!1})});$("a[target\x3dajax]",a).each(function(){$(this).click(function(a){var b=$(this),c=b.attr("rel");if(c){var e=$("#"+c);e.loadUrl(b.attr("href"),{},function(){e.find("[layoutH]").layoutH()})}a.preventDefault()})});$("div.pagination",a).each(function(){var a=$(this);a.pagination({targetType:a.attr("targetType"),rel:a.attr("rel"),totalCount:a.attr("totalCount"),numPerPage:a.attr("numPerPage"),pageNumShown:a.attr("pageNumShown"),currentPage:a.attr("currentPage")})});$.fn.sortDrag&&$("div.sortDrag",a).sortDrag();$.fn.ajaxTodo&&$("a[target\x3dajaxTodo]",a).ajaxTodo();$.fn.dwzExport&&$("a[target\x3ddwzExport]",a).dwzExport();$.fn.lookup&&$("a[lookupGroup]",a).lookup();$.fn.multLookup&&$("[multLookup]:button",a).multLookup();$.fn.suggest&&$("input[suggestFields]",a).suggest();$.fn.itemDetail&&$("table.itemDetail",a).itemDetail();$.fn.selectedTodo&&$("a[target\x3dselectedTodo]",a).selectedTodo();$.fn.pagerForm&&$("form[rel\x3dpagerForm]",a).pagerForm({parentBox:a})}(function(){function a(a){return(0>a||9<a?"":"0")+a}function c(a,b,c,d){for(;d>=c;d--){var e=a.substring(b,b+d);if(e.length<c)break;if((new RegExp(/^\d+$/)).test(e))return e}return null}function b(a,b){a+="";b+="";for(var d=0,f=0,h,l,v,w,r=new Date(1900,0,1),t=r.getYear(),m=r.getMonth()+1,x=1,p=r.getHours(),u=r.getMinutes(),r=r.getSeconds(),z="";f<b.length;){h=b.charAt(f);for(l="";b.charAt(f)==h&&f<b.length;)l+=b.charAt(f++);if("yyyy"==l||"yy"==l||"y"==l){"yyyy"==l&&(w=v=4);"yy"==l&&(w=v=2);"y"==l&&(v=2,w=4);t=c(a,d,v,w);if(null==t)return 0;d+=t.length;2==t.length&&(t=70<t?1900+(t-0):2E3+(t-0))}else if("MMM"==l||"NNN"==l){for(h=m=0;h<e.length;h++){var A=e[h];if(a.substring(d,d+A.length).toLowerCase()==A.toLowerCase()&&("MMM"==l||"NNN"==l&&11<h)){m=h+1;12<m&&(m-=12);d+=A.length;break}}if(1>m||12<m)return 0}else if("EE"==l||"E"==l)for(h=0;h<g.length;h++){if(l=g[h],a.substring(d,d+l.length).toLowerCase()==l.toLowerCase()){d+=l.length;break}}else if("MM"==l||"M"==l){m=c(a,d,l.length,2);if(null==m||1>m||12<m)return 0;d+=m.length}else if("dd"==l||"d"==l){x=c(a,d,l.length,2);if(null==x||1>x||31<x)return 0;d+=x.length}else if("hh"==l||"h"==l){p=c(a,d,l.length,2);if(null==p||1>p||12<p)return 0;d+=p.length}else if("HH"==l||"H"==l){p=c(a,d,l.length,2);if(null==p||0>p||23<p)return 0;d+=p.length}else if("KK"==l||"K"==l){p=c(a,d,l.length,2);if(null==p||0>p||11<p)return 0;d+=p.length}else if("kk"==l||"k"==l){p=c(a,d,l.length,2);if(null==p||1>p||24<p)return 0;d+=p.length;p--}else if("mm"==l||"m"==l){u=c(a,d,l.length,2);if(null==u||0>u||59<u)return 0;d+=u.length}else if("ss"==l||"s"==l){r=c(a,d,l.length,2);if(null==r||0>r||59<r)return 0;d+=r.length}else if("a"==l){if("am"==a.substring(d,d+2).toLowerCase())z="AM";else if("pm"==a.substring(d,d+2).toLowerCase())z="PM";else return 0;d+=2}else{if(a.substring(d,d+l.length)!=l)return 0;d+=l.length}}if(d!=a.length)return 0;if(2==m)if(0==t%4&&0!=t%100||0==t%400){if(29<x)return 0}else if(28<x)return 0;if((4==m||6==m||9==m||11==m)&&30<x)return 0;12>p&&"PM"==z?p=p-0+12:11<p&&"AM"==z&&(p-=12);return new Date(t,m-1,x,p,u,r)}function d(a){return a.replace(RegExp("({[A-Za-z0-9_+-]*})","g"),function(a){return eval("("+a.replace(/[{}]+/g,"")+")")})}var e="January February March April May June July August September October November December Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),g="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sun Mon Tue Wed Thu Fri Sat".split(" ");Date.prototype.formatDate=function(b){b+="";var c="",d=0,f,q;f=this.getYear()+"";q=this.getMonth()+1;var l=this.getDate(),v=this.getDay(),w=this.getHours(),r=this.getMinutes(),t=this.getSeconds(),m={};4>f.length&&(f=""+(f-0+1900));m.y=""+f;m.yyyy=f;m.yy=f.substring(2,4);m.M=q;m.MM=a(q);m.MMM=e[q-1];m.NNN=e[q+11];m.d=l;m.dd=a(l);m.E=g[v+7];m.EE=g[v];m.H=w;m.HH=a(w);m.h=0==w?12:12<w?w-12:w;m.hh=a(m.h);m.K=11<w?w-12:w;m.k=w+1;m.KK=a(m.K);m.kk=a(m.k);m.a=11<w?"PM":"AM";m.m=r;m.mm=a(r);m.s=t;for(m.ss=a(t);d<b.length;){f=b.charAt(d);for(q="";b.charAt(d)==f&&d<b.length;)q+=b.charAt(d++);c=null!=m[q]?c+m[q]:c+q}return c};String.prototype.parseDate=function(a){this.length<a.length&&(a=a.slice(0,this.length));return b(this,a)};Date.prototype.formatDateTm=function(a){var b=this.getFullYear(),c=this.getMonth()+1,e=this.getDate(),e=a.replaceAll("%y",b).replaceAll("%M",c).replaceAll("%d",e),e=d(e);a=1900;b=0;c=1;e=e.split("-");0<e.length&&(a=e[0]);1<e.length&&(b=e[1]-1);2<e.length&&(c=e[2]);return(new Date(a,b,c)).formatDate("yyyy-MM-dd")}})();(function(){function a(a){if(!a)return 0;a=a.replace(",","");return $.isNumeric(a)?parseFloat(a):0}function c(a,c){a=a.toString().replace(/,/g,"");a=a.replace(/^0+/,"");if(""==a)return"\u96f6\u5143\u6574";if(isNaN(a))return"\u9519\u8bef\uff1a\u91d1\u989d\u4e0d\u662f\u5408\u6cd5\u7684\u6570\u503c\uff01";var b="";1<a.length&&(0==a.indexOf("-")&&(a=a.replace("-",""),b="\u8d1f"),0==a.indexOf("+")&&(a=a.replace("+","")));var d,f,h,k,n,q,l,v,w,r,t,m;h="undefined"==typeof c||null==c||0>Number(c)||5<Number(c);f=a.split(".");1<f.length?(d=f[0],f=f[1],h&&(c=5<f.length?5:f.length),f=Number("0."+f),f*=Math.pow(10,c),f=Math.round(Math.abs(f)),f/=Math.pow(10,c),f=f.toString().split("."),1==Number(f[0])&&(d=(Number(d)+1).toString()),f=1<f.length?f[1]:""):(d=a,f="");if(44<d.length)return"\u9519\u8bef\uff1a\u91d1\u989d\u503c\u592a\u5927\u4e86\uff01\u6574\u6570\u4f4d\u957f\u3010"+d.length.toString()+"\u3011\u8d85\u8fc7\u4e86\u4e0a\u9650\u2014\u201444\u4f4d/\u5343\u6b63/10^43\uff08\u6ce8\uff1a1\u6b63\x3d1\u4e07\u6da7\x3d1\u4ebf\u4ebf\u4ebf\u4ebf\u4ebf\uff0c10^40\uff09\uff01";k="\u96f6\u58f9\u8d30\u53c1\u8086\u4f0d\u9646\u67d2\u634c\u7396".split("");n=["","\u62fe","\u4f70","\u4edf"];q=" \u4e07 \u4ebf \u5146 \u4eac \u5793 \u677c \u7a70 \u6c9f \u6da7 \u6b63".split(" ");l=["\u89d2","\u5206","\u5398","\u6beb","\u4e1d"];h="";if(0<Number(d)){for(w=v=0;w<d.length;w++)r=d.length-w-1,t=d.substr(w,1),m=r/4,r%=4,"0"==t?v++:(0<v&&(h+=k[0]),v=0,h+=k[Number(t)]+n[r]),0==r&&4>v&&(h+=q[m]);h+="\u5143"}for(w=0;w<f.length;w++)t=f.substr(w,1),"0"!=t&&(h+=k[Number(t)]+l[w]);""==h&&(h="\u96f6\u5143");""==f&&(h+="\u6574");return""+b+h}Number.prototype.formatCurrency=function(a){a=this.toString().replace(/\$|\,/g,"");isNaN(a)&&(a="0");var b=a==(a=Math.abs(a));a=Math.floor(100*a+.50000000001);var c=a%100;a=Math.floor(a/100).toString();10>c&&(c="0"+c);for(var g=0;g<Math.floor((a.length-(1+g))/3);g++)a=a.substring(0,a.length-(4*g+3))+","+a.substring(a.length-(4*g+3));return(b?"":"-")+a+"."+c};Number.prototype.amountInWords=function(a){return c(this,a)};String.prototype.parseCurrency=function(b){return a(this)};String.prototype.amountInWords=function(b){var d=a(this);return c(d,b)}})();(function(a){a.validator&&(a.validator.addMethod("alphanumeric",function(a,b){return this.optional(b)||/^\w+$/i.test(a)},"Letters, numbers or underscores only please"),a.validator.addMethod("lettersonly",function(a,b){return this.optional(b)||/^[a-z]+$/i.test(a)},"Letters only please"),a.validator.addMethod("phone",function(a,b){return this.optional(b)||/^[0-9 \(\)]{7,30}$/.test(a)},"Please specify a valid phone number"),a.validator.addMethod("postcode",function(a,b){return this.optional(b)||/^[0-9 A-Za-z]{5,20}$/.test(a)},"Please specify a valid postcode"),a.validator.addMethod("date",function(c,b){c=c.replace(/\s+/g,"");if(String.prototype.parseDate){var d=a(b),e=d.attr("dateFmt")||"yyyy-MM-dd";return!d.val()||d.val().parseDate(e)}return this.optional(b)||c.match(/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/)},"Please enter a valid date."),a.validator.addMethod("customvalid",function(a,b,d){try{return eval("("+d+")")}catch(e){return!1}},"Please fix this field."),a.validator.addClassRules({date:{date:!0},alphanumeric:{alphanumeric:!0},lettersonly:{lettersonly:!0},phone:{phone:!0},postcode:{postcode:!0}}),a.validator.setDefaults({errorElement:"span"}),a.validator.autoCreateRanges=!0)})(jQuery);